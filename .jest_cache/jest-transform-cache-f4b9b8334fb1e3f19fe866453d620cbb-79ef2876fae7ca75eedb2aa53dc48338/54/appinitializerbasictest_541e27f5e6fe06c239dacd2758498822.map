{"version":3,"names":["_appInitializer","require","createMockDependencySystem","modules","Map","register","key","value","set","get","createStubBrowserService","win","setTimeout","fn","clearTimeout","EventTarget","performance","now","crypto","randomUUID","DOMPurify","sanitize","html","Event","doc","readyState","addEventListener","removeEventListener","getElementById","querySelector","createEvent","initCustomEvent","createElement","style","body","appendChild","removeChild","document","getWindow","getDocument","createNoopFactory","cleanup","test","DependencySystem","appInit","createAppInitializer","browserService","createChatManager","createApiEndpoints","endpoints","PROJECTS","DETAIL","MODAL_MAPPINGS","APP_CONFIG","TIMEOUTS","DOM_READY","expect","initializeApp","resolves","not","toThrow"],"sources":["appinitializer-basic.test.js"],"sourcesContent":["/**\n * Basic smoke test for createAppInitializer\n * ----------------------------------------------------------\n * Verifies that the bootstrap sequence resolves without\n * throwing given a minimal set of stubbed dependencies.\n * This is intended to detect regressions where new mandatory\n * DI parameters are added to appInitializer without updating\n * downstream boot scripts or tests.\n */\n\nimport { createAppInitializer } from '../../static/js/init/appInitializer.js';\n\nfunction createMockDependencySystem () {\n  const modules = new Map();\n  return {\n    modules,\n    register: (key, value) => modules.set(key, value),\n    get: (key) => modules.get(key)\n  };\n}\n\nfunction createStubBrowserService () {\n  const win = {\n    setTimeout: (fn) => fn && fn(),\n    clearTimeout: () => {},\n    EventTarget,\n    performance: { now: () => 0 },\n    crypto: { randomUUID: () => '00000000-0000-4000-8000-000000000000' },\n    DOMPurify: { sanitize: (html) => html },\n    Event: function () {}\n  };\n  const doc = {\n    readyState: 'complete',\n    addEventListener: () => {},\n    removeEventListener: () => {},\n    getElementById: () => null,\n    querySelector: () => null,\n    createEvent: () => ({ initCustomEvent: () => {} }),\n    createElement: () => ({ style: {} }),\n    body: { appendChild: () => {}, removeChild: () => {} }\n  };\n  win.document = doc;\n\n  return {\n    getWindow: () => win,\n    getDocument: () => doc,\n    setTimeout: win.setTimeout,\n    clearTimeout: win.clearTimeout\n  };\n}\n\nfunction createNoopFactory () {\n  return () => ({ cleanup () {} });\n}\n\ntest('appInitializer completes bootstrap without error', async () => {\n  const DependencySystem = createMockDependencySystem();\n\n  const appInit = createAppInitializer({\n    DependencySystem,\n    browserService: createStubBrowserService(),\n    createChatManager: createNoopFactory(),\n    createApiEndpoints: () => ({\n      endpoints: {\n        PROJECTS: '/api/projects/',\n        DETAIL: '/api/projects/{id}/'\n      },\n      cleanup () {}\n    }),\n    MODAL_MAPPINGS: {},\n    APP_CONFIG: {\n      TIMEOUTS: { DOM_READY: 1000 }\n    }\n  });\n\n  await expect(appInit.initializeApp()).resolves.not.toThrow();\n});\n"],"mappings":";;AAUA,IAAAA,eAAA,GAAAC,OAAA;AAVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA,SAASC,0BAA0BA,CAAA,EAAI;EACrC,MAAMC,OAAO,GAAG,IAAIC,GAAG,CAAC,CAAC;EACzB,OAAO;IACLD,OAAO;IACPE,QAAQ,EAAEA,CAACC,GAAG,EAAEC,KAAK,KAAKJ,OAAO,CAACK,GAAG,CAACF,GAAG,EAAEC,KAAK,CAAC;IACjDE,GAAG,EAAGH,GAAG,IAAKH,OAAO,CAACM,GAAG,CAACH,GAAG;EAC/B,CAAC;AACH;AAEA,SAASI,wBAAwBA,CAAA,EAAI;EACnC,MAAMC,GAAG,GAAG;IACVC,UAAU,EAAGC,EAAE,IAAKA,EAAE,IAAIA,EAAE,CAAC,CAAC;IAC9BC,YAAY,EAAEA,CAAA,KAAM,CAAC,CAAC;IACtBC,WAAW;IACXC,WAAW,EAAE;MAAEC,GAAG,EAAEA,CAAA,KAAM;IAAE,CAAC;IAC7BC,MAAM,EAAE;MAAEC,UAAU,EAAEA,CAAA,KAAM;IAAuC,CAAC;IACpEC,SAAS,EAAE;MAAEC,QAAQ,EAAGC,IAAI,IAAKA;IAAK,CAAC;IACvCC,KAAK,EAAE,SAAAA,CAAA,EAAY,CAAC;EACtB,CAAC;EACD,MAAMC,GAAG,GAAG;IACVC,UAAU,EAAE,UAAU;IACtBC,gBAAgB,EAAEA,CAAA,KAAM,CAAC,CAAC;IAC1BC,mBAAmB,EAAEA,CAAA,KAAM,CAAC,CAAC;IAC7BC,cAAc,EAAEA,CAAA,KAAM,IAAI;IAC1BC,aAAa,EAAEA,CAAA,KAAM,IAAI;IACzBC,WAAW,EAAEA,CAAA,MAAO;MAAEC,eAAe,EAAEA,CAAA,KAAM,CAAC;IAAE,CAAC,CAAC;IAClDC,aAAa,EAAEA,CAAA,MAAO;MAAEC,KAAK,EAAE,CAAC;IAAE,CAAC,CAAC;IACpCC,IAAI,EAAE;MAAEC,WAAW,EAAEA,CAAA,KAAM,CAAC,CAAC;MAAEC,WAAW,EAAEA,CAAA,KAAM,CAAC;IAAE;EACvD,CAAC;EACDzB,GAAG,CAAC0B,QAAQ,GAAGb,GAAG;EAElB,OAAO;IACLc,SAAS,EAAEA,CAAA,KAAM3B,GAAG;IACpB4B,WAAW,EAAEA,CAAA,KAAMf,GAAG;IACtBZ,UAAU,EAAED,GAAG,CAACC,UAAU;IAC1BE,YAAY,EAAEH,GAAG,CAACG;EACpB,CAAC;AACH;AAEA,SAAS0B,iBAAiBA,CAAA,EAAI;EAC5B,OAAO,OAAO;IAAEC,OAAOA,CAAA,EAAI,CAAC;EAAE,CAAC,CAAC;AAClC;AAEAC,IAAI,CAAC,kDAAkD,EAAE,YAAY;EACnE,MAAMC,gBAAgB,GAAGzC,0BAA0B,CAAC,CAAC;EAErD,MAAM0C,OAAO,GAAG,IAAAC,oCAAoB,EAAC;IACnCF,gBAAgB;IAChBG,cAAc,EAAEpC,wBAAwB,CAAC,CAAC;IAC1CqC,iBAAiB,EAAEP,iBAAiB,CAAC,CAAC;IACtCQ,kBAAkB,EAAEA,CAAA,MAAO;MACzBC,SAAS,EAAE;QACTC,QAAQ,EAAE,gBAAgB;QAC1BC,MAAM,EAAE;MACV,CAAC;MACDV,OAAOA,CAAA,EAAI,CAAC;IACd,CAAC,CAAC;IACFW,cAAc,EAAE,CAAC,CAAC;IAClBC,UAAU,EAAE;MACVC,QAAQ,EAAE;QAAEC,SAAS,EAAE;MAAK;IAC9B;EACF,CAAC,CAAC;EAEF,MAAMC,MAAM,CAACZ,OAAO,CAACa,aAAa,CAAC,CAAC,CAAC,CAACC,QAAQ,CAACC,GAAG,CAACC,OAAO,CAAC,CAAC;AAC9D,CAAC,CAAC","ignoreList":[]}