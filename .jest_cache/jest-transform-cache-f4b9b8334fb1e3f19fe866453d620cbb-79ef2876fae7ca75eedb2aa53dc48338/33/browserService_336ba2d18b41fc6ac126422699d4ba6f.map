{"version":3,"names":["_session","require","_moduleLogger","buildUrl","params","baseHref","Error","url","URL","startsWith","undefined","Object","entries","forEach","k","v","searchParams","delete","set","sorted","Array","from","sort","a","b","localeCompare","search","URLSearchParams","toString","raw","pathname","replace","path","normaliseUrl","u","hash","err","logger","error","context","input","normalizeUrl","exports","createBrowserService","windowObject","_logger","_currentUser","location","createFallbackDependencySystem","DependencySystem","register","waitForDependencies","waitFor","deps","timeout","_buildUrl","href","FormDataImpl","form","FormData","MutationObserverImpl","callback","MutationObserver","fetchImpl","args","fetch","response","setCurrentUser","userObj","getCurrentUser","triggerDownload","blob","suggestedName","createObjectURL","document","createElement","download","body","appendChild","click","revokeObjectURL","remove","getSearchParam","get","setSearchParam","history","replaceState","removeSearchParam","getItem","localStorage","setItem","removeItem","clear","key","n","length","setTimeout","setInterval","clearInterval","requestAnimationFrame","cb","setLocation","assign","getLocationPathname","getLocation","getLocationHref","setHistory","pushState","state","title","clearTimeout","getWindow","getDocument","getHistory","getInnerWidth","innerWidth","getDependencySystem","getSessionId","getUserAgent","navigator","userAgent","setLogger","newLogger","cleanup"],"sources":["browserService.js"],"sourcesContent":["/**\n * Browser-level helpers (DI strict, testable).\n * @param {Object} deps\n * @param {Window} deps.windowObject – injected window for testability\n */\n\nlet _moduleLogger = null;          // NEW – gives normaliseUrl access to logger\n\n/**\n * Shared URL helpers\n * Refactored for strict dependency injection — no global window.\n * If you need app-level location, inject windowObject and call createBrowserService({ windowObject }).\n * The standalone helpers below now require explicit baseHref/location.\n */\n\nimport { getSessionId } from './session.js';\n// --- shared URL helpers -------------------------------------------------\nexport function buildUrl(params = {}, baseHref) {\n  if (!baseHref) {\n    throw new Error('buildUrl requires baseHref (no global window access allowed)');\n  }\n  const url = new URL(baseHref, baseHref.startsWith('http') ? undefined : 'http://_');\n  Object.entries(params).forEach(([k, v]) =>\n    (v === undefined || v === null || v === '')\n      ? url.searchParams.delete(k)\n      : url.searchParams.set(k, v)\n  );\n  const sorted = Array.from(url.searchParams.entries())\n                      .sort(([a], [b]) => a.localeCompare(b));\n  url.search = new URLSearchParams(sorted).toString();\n  const raw = url.pathname.replace(/\\/{2,}/g, '/').replace(/\\/+$/, '');\n  const path = raw || '/';          // guarantee leading “/”\n  return path + (url.search ? `?${url.search}` : '');\n}\n\nexport function normaliseUrl(u = '') {\n  try {\n    const url = new URL(u, u.startsWith('http') ? undefined : 'http://_');\n    // url.search already includes '?' if params exist, or is empty string otherwise.\n    const raw   = url.pathname.replace(/\\/{2,}/g, '/').replace(/\\/+$/, '');\n    const path  = raw || '/';\n    return path + url.search + url.hash;\n  } catch (err) {\n    const logger = _moduleLogger;\n    if (logger) {\n      logger.error('[browserService] normaliseUrl failed', err,\n        { context: 'browserService:normaliseUrl', input: u });\n    }\n    return u;\n  }\n}\n\n// U.S.-spelling alias – keeps backward compatibility\nexport const normalizeUrl = normaliseUrl;\n\nexport function createBrowserService({ windowObject, logger } = {}) {\n  let _logger = logger;\n\n  _moduleLogger = _logger;\n\n  let _currentUser = null;\n\n  if (!windowObject)\n    throw new Error('browserService: windowObject must be injected (no global fallback)');\n  if (!windowObject?.location) throw new Error('browserService: windowObject is required');\n\n  /* --------------------------------------------------------------\n   *  DependencySystem bootstrap (runtime fallback)\n   * --------------------------------------------------------------\n   *  The production build expects the hosting HTML page to expose a\n   *  fully-featured `window.DependencySystem` **before** any of the\n   *  application modules execute.  In unit-tests or server-side\n   *  rendering scenarios this global often does not exist which used\n   *  to make the very first access (`browserAPI.getDependencySystem()` in\n   *  app.js) throw and abort the whole bootstrap.\n   *\n   *  To keep the contract intact while still allowing execution in\n   *  non-browser contexts we lazily create a *minimal* implementation\n   *  that fulfils just the subset of the API used across the codebase.\n   *  The implementation lives *inside* browserService so we respect the\n   *  guardrail that forbids creation of new top-level modules.\n   * -------------------------------------------------------------- */\n\n  function createFallbackDependencySystem() {\n    throw new Error('[browserService] Fallback DependencySystem is forbidden—application DI contract not satisfied.');\n  }\n\n  if (!windowObject.DependencySystem || typeof windowObject.DependencySystem.register !== 'function') {\n    windowObject.DependencySystem = createFallbackDependencySystem();\n  }\n\n  // Ensure modern alias exists even when host page provided its own DS\n  if (typeof windowObject.DependencySystem.waitForDependencies !== 'function'\n      && typeof windowObject.DependencySystem.waitFor === 'function') {\n    windowObject.DependencySystem.waitForDependencies = (deps = [], { timeout = 15000, context = null } = {}) =>\n      windowObject.DependencySystem.waitFor(deps, context, timeout);\n  }\n\n  // reuse shared helper – avoids keeping two divergent copies\n  function _buildUrl(params = {}) {\n    return buildUrl(params, windowObject.location.href);\n  }\n\n  // --------- DI wrappers for browser APIs ---------\n  function FormDataImpl(form) {\n    if (!windowObject.FormData) {\n      logger.error('browserService: windowObject.FormData is not available. This may occur in test/mocked environments.');\n      throw new Error('browserService: windowObject.FormData is not available. This may occur in test/mocked environments.');\n    }\n    return new windowObject.FormData(form);\n  }\n\n  function MutationObserverImpl(callback) {\n    if (!windowObject.MutationObserver) {\n      logger.error('browserService: windowObject.MutationObserver is not available. This may occur in test/mocked environments.');\n      throw new Error('browserService: windowObject.MutationObserver is not available. This may occur in test/mocked environments.');\n    }\n    return new windowObject.MutationObserver(callback);\n  }\n\n  async function fetchImpl(...args) {\n    if (!windowObject.fetch) {\n      throw new Error('browserService: windowObject.fetch is not available. This may occur in test/mocked environments.');\n    }\n    let response;\n    response = await windowObject.fetch(...args);\n    return response;\n  }\n\n  function setCurrentUser(userObj) { _currentUser = userObj ?? null; }\n  function getCurrentUser()      { return _currentUser; }\n\n  // ---------------- File download helper ----------------\n  /**\n   * Trigger a browser download for a Blob or ArrayBuffer.\n   * Falls back to console error if window APIs unavailable.\n   * @param {Blob|ArrayBuffer} blob\n   * @param {string} suggestedName\n   */\n  function triggerDownload(blob, suggestedName = 'download.bin') {\n    try {\n      const url = windowObject.URL.createObjectURL(blob);\n      const a = windowObject.document.createElement('a');\n      a.href = url;\n      a.download = suggestedName;\n      windowObject.document.body.appendChild(a);\n      a.click();\n      windowObject.URL.revokeObjectURL(url);\n      a.remove();\n    } catch (err) {\n      logger.error('[browserService] triggerDownload failed', err);\n      throw err;\n    }\n  }\n\n  return {\n    // Query-string helpers\n    buildUrl        : _buildUrl,\n    normaliseUrl,              // ← add this line\n    normalizeUrl,              // ← new alias\n    getSearchParam: (k) => new URL(windowObject.location.href).searchParams.get(k),\n    setSearchParam   : (k, v) => windowObject.history.replaceState({}, '', _buildUrl({ [k]: v })),\n    removeSearchParam: (k) => windowObject.history.replaceState({}, '', _buildUrl({ [k]: '' })),\n\n    // Storage helpers\n    getItem   : (k) => windowObject.localStorage.getItem(k),\n    setItem   : (k, v) => windowObject.localStorage.setItem(k, v),\n    removeItem: (k) => windowObject.localStorage.removeItem(k),\n    clear     : () => windowObject.localStorage.clear(),\n    key       : (n) => windowObject.localStorage.key(n),\n    get length() { return windowObject.localStorage.length; },\n\n    // Timing helpers\n    setTimeout: (...args) => {\n      if (!windowObject.setTimeout) {\n        _logger?.error?.('browserService: windowObject.setTimeout is not available. This may occur in test/mocked environments.');\n        throw new Error('browserService: windowObject.setTimeout is not available. This may occur in test/mocked environments.');\n      }\n      return windowObject.setTimeout(...args);\n    },\n\n    /* Auth & other modules need interval helpers – expose via DI */\n    setInterval: (...args) => {\n      if (!windowObject.setInterval) {\n        _logger?.error?.('browserService: windowObject.setInterval is not available. This may occur in test/mocked environments.');\n        throw new Error('browserService: windowObject.setInterval is not available. This may occur in test/mocked environments.');\n      }\n      return windowObject.setInterval(...args);\n    },\n    clearInterval: (...args) => {\n      if (!windowObject.clearInterval) {\n        _logger?.error?.('browserService: windowObject.clearInterval is not available. This may occur in test/mocked environments.');\n        throw new Error('browserService: windowObject.clearInterval is not available. This may occur in test/mocked environments.');\n      }\n      return windowObject.clearInterval(...args);\n    },\n\n    requestAnimationFrame: (cb) => {\n      if (typeof windowObject.requestAnimationFrame === 'function') {\n        return windowObject.requestAnimationFrame(cb);\n      }\n      logger.error('browserService: windowObject.requestAnimationFrame is required; fallback to setTimeout is forbidden.');\n      throw new Error('browserService: windowObject.requestAnimationFrame is required; fallback to setTimeout is forbidden.');\n    },\n\n    // Location / navigation helpers\n    setLocation: (url) => { windowObject.location.assign(url); },\n    getLocationPathname: () => windowObject.location.pathname,\n    getLocation: () => windowObject.location,\n    URLSearchParams: windowObject.URLSearchParams,\n    FormData: windowObject.FormData,\n\n    // Browser APIs for DI/testability\n    FormDataImpl,\n    MutationObserver: MutationObserverImpl,\n    fetch: fetchImpl,\n\n    /* Native constructor needed by Auth & other modules */\n    // URLSearchParams: windowObject.URLSearchParams, // already above\n\n    // Passthroughs for test harnesses\n    getLocationHref: () => windowObject.location.href,\n    setHistory: (...a) => windowObject.history.pushState(...a),\n\n    /* --- History helpers for NavigationService --- */\n    pushState   : (state = {}, title = '', url = '') =>\n      windowObject.history.pushState(state, title, url),\n\n    replaceState: (state = {}, title = '', url = '') =>\n      windowObject.history.replaceState(state, title, url),\n    clearTimeout : (...a) => windowObject.clearTimeout(...a),\n\n    /* new accessors required by app.js */\n    getWindow           : () => windowObject,\n    getDocument         : () => windowObject.document,\n    getHistory          : () => windowObject.history,\n    getInnerWidth       : () => windowObject.innerWidth,\n    getDependencySystem : () => windowObject.DependencySystem,\n\n    // session-scoped user helpers (used by app.handleAuthStateChange)\n    setCurrentUser,\n    getCurrentUser,\n\n    /* correlation helpers */\n    getSessionId : () => getSessionId(),\n    getUserAgent : () => windowObject.navigator?.userAgent || 'Unknown',\n    setLogger(newLogger) { _logger = newLogger; },\n\n    cleanup () {/* no internal listeners or timers */}\n  };\n}\n"],"mappings":"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","ignoreList":[]}