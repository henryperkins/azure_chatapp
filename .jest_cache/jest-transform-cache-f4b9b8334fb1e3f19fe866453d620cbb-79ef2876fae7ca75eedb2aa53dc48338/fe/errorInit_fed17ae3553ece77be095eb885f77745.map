{"version":3,"names":["createErrorInit","deps","DependencySystem","browserService","eventHandlers","logger","safeHandler","Error","setupGlobalErrorHandling","windowObj","getWindow","trackListener","evt","message","filename","source","lineno","colno","error","log","modules","get","err","stack","context","description","passive","event","reason","setupSpecificErrorHandlers","initializeErrorHandling","cleanup","cleanupListeners","debug"],"sources":["errorInit.js"],"sourcesContent":["// ========================================\n// FILE: /initialization/phases/errorInit.js\n// ========================================\n/**\n * Error Handling Initialization\n * Sets up global error handlers and unhandled rejection handlers\n * ~80 lines\n */\n\nexport function createErrorInit(deps) {\n    const { DependencySystem, browserService, eventHandlers, logger, safeHandler } = deps;\n\n    if (!DependencySystem || !browserService || !eventHandlers || !logger || !safeHandler) {\n        throw new Error('[errorInit] Missing required dependencies for error handling initialization.');\n    }\n\n    function setupGlobalErrorHandling() {\n        try {\n            const windowObj = browserService.getWindow();\n            if (!windowObj) {\n                throw new Error('[errorInit] browserService.getWindow() returned null/undefined.');\n            }\n\n            // Global error handler\n            eventHandlers.trackListener(\n                windowObj,\n                'error',\n                (evt) => {\n                    const { message, filename: source, lineno, colno, error } = evt;\n                    const log = DependencySystem.modules.get('logger');\n                    log.error(\n                        '[window.error]',\n                        { message, source, lineno, colno, err: error?.stack || error },\n                        { context: 'global.error' }\n                    );\n                },\n                { context: 'errorInit', description: 'window error handler', passive: true }\n            );\n\n            // Unhandled promise rejection handler\n            eventHandlers.trackListener(\n                windowObj,\n                'unhandledrejection',\n                safeHandler((event) => {\n                    logger.error('[unhandledrejection]', event?.reason, { context: 'global.unhandledrejection' });\n                }, 'global unhandledrejection'),\n                { context: 'errorInit' }\n            );\n\n            logger.log('[errorInit] Global error handling setup completed', {\n                context: 'errorInit:setupGlobalErrorHandling'\n            });\n        } catch (err) {\n            logger.error('[errorInit] Failed to setup global error handling', err, {\n                context: 'errorInit:setupGlobalErrorHandling'\n            });\n            throw err;\n        }\n    }\n\n    function setupSpecificErrorHandlers() {\n        try {\n            const windowObj = browserService.getWindow();\n            if (!windowObj) {\n                throw new Error('[errorInit] browserService.getWindow() returned null/undefined.');\n            }\n\n            // Placeholder for future specific handlers\n            // Add any application-specific error handlers here\n\n            logger.log('[errorInit] Specific error handlers setup completed', {\n                context: 'errorInit:setupSpecificErrorHandlers'\n            });\n        } catch (err) {\n            logger.error('[errorInit] Failed to setup specific error handlers', err, {\n                context: 'errorInit:setupSpecificErrorHandlers'\n            });\n            throw err;\n        }\n    }\n\n    function initializeErrorHandling() {\n        try {\n            logger.log('[errorInit] Starting error handling initialization', {\n                context: 'errorInit:initializeErrorHandling'\n            });\n\n            setupGlobalErrorHandling();\n            setupSpecificErrorHandlers();\n\n            logger.log('[errorInit] Error handling initialization completed', {\n                context: 'errorInit:initializeErrorHandling'\n            });\n        } catch (err) {\n            logger.error('[errorInit] Error handling initialization failed', err, {\n                context: 'errorInit:initializeErrorHandling'\n            });\n            throw err;\n        }\n    }\n\n    function cleanup() {\n        eventHandlers.cleanupListeners({ context: 'errorInit' });\n        logger.debug('[errorInit] Cleanup completed', { context: 'errorInit:cleanup' });\n    }\n\n    return {\n        setupGlobalErrorHandling,\n        setupSpecificErrorHandlers,\n        initializeErrorHandling,\n        cleanup\n    };\n}\n"],"mappings":"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","ignoreList":[]}