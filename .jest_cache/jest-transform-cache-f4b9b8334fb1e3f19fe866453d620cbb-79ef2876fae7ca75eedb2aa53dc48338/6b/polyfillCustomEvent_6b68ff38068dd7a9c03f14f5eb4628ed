fade2188cf945caeba35c1850595ab97
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createCustomEventPolyfill = createCustomEventPolyfill;
function createCustomEventPolyfill({
  browserService,
  logger
} = {}) {
  if (!browserService) throw new Error('[CustomEventPolyfill] browserService required');
  const win = browserService.getWindow();
  const doc = browserService.getDocument();
  if (typeof win.CustomEvent === 'function') return {
    applied: false,
    cleanup() {}
  };
  function CustomEvent(event, params = {
    bubbles: false,
    cancelable: false,
    detail: undefined
  }) {
    const evt = doc.createEvent('CustomEvent');
    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
    return evt;
  }
  CustomEvent.prototype = win.Event.prototype;
  win.CustomEvent = CustomEvent;
  logger?.info?.('[CustomEventPolyfill] applied', {
    context: 'CustomEventPolyfill'
  });
  return {
    applied: true,
    cleanup() {
      delete win.CustomEvent;
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVDdXN0b21FdmVudFBvbHlmaWxsIiwiYnJvd3NlclNlcnZpY2UiLCJsb2dnZXIiLCJFcnJvciIsIndpbiIsImdldFdpbmRvdyIsImRvYyIsImdldERvY3VtZW50IiwiQ3VzdG9tRXZlbnQiLCJhcHBsaWVkIiwiY2xlYW51cCIsImV2ZW50IiwicGFyYW1zIiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJ1bmRlZmluZWQiLCJldnQiLCJjcmVhdGVFdmVudCIsImluaXRDdXN0b21FdmVudCIsInByb3RvdHlwZSIsIkV2ZW50IiwiaW5mbyIsImNvbnRleHQiXSwic291cmNlcyI6WyJwb2x5ZmlsbEN1c3RvbUV2ZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDdXN0b21FdmVudFBvbHlmaWxsKHsgYnJvd3NlclNlcnZpY2UsIGxvZ2dlciB9ID0ge30pIHtcbiAgaWYgKCFicm93c2VyU2VydmljZSkgdGhyb3cgbmV3IEVycm9yKCdbQ3VzdG9tRXZlbnRQb2x5ZmlsbF0gYnJvd3NlclNlcnZpY2UgcmVxdWlyZWQnKTtcbiAgY29uc3Qgd2luID0gYnJvd3NlclNlcnZpY2UuZ2V0V2luZG93KCk7XG4gIGNvbnN0IGRvYyA9IGJyb3dzZXJTZXJ2aWNlLmdldERvY3VtZW50KCk7XG4gIGlmICh0eXBlb2Ygd2luLkN1c3RvbUV2ZW50ID09PSAnZnVuY3Rpb24nKVxuICAgIHJldHVybiB7IGFwcGxpZWQ6IGZhbHNlLCBjbGVhbnVwICgpIHt9IH07XG5cbiAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQoZXZlbnQsIHBhcmFtcyA9IHsgYnViYmxlczpmYWxzZSwgY2FuY2VsYWJsZTpmYWxzZSwgZGV0YWlsOnVuZGVmaW5lZCB9KSB7XG4gICAgY29uc3QgZXZ0ID0gZG9jLmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQoZXZlbnQsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gICAgcmV0dXJuIGV2dDtcbiAgfVxuICBDdXN0b21FdmVudC5wcm90b3R5cGUgPSB3aW4uRXZlbnQucHJvdG90eXBlO1xuICB3aW4uQ3VzdG9tRXZlbnQgPSBDdXN0b21FdmVudDtcblxuICBsb2dnZXI/LmluZm8/LignW0N1c3RvbUV2ZW50UG9seWZpbGxdIGFwcGxpZWQnLCB7IGNvbnRleHQ6ICdDdXN0b21FdmVudFBvbHlmaWxsJyB9KTtcbiAgcmV0dXJuIHtcbiAgICBhcHBsaWVkOiB0cnVlLFxuICAgIGNsZWFudXAgKCkgeyBkZWxldGUgd2luLkN1c3RvbUV2ZW50OyB9XG4gIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLFNBQVNBLHlCQUF5QkEsQ0FBQztFQUFFQyxjQUFjO0VBQUVDO0FBQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO0VBQ3pFLElBQUksQ0FBQ0QsY0FBYyxFQUFFLE1BQU0sSUFBSUUsS0FBSyxDQUFDLCtDQUErQyxDQUFDO0VBQ3JGLE1BQU1DLEdBQUcsR0FBR0gsY0FBYyxDQUFDSSxTQUFTLENBQUMsQ0FBQztFQUN0QyxNQUFNQyxHQUFHLEdBQUdMLGNBQWMsQ0FBQ00sV0FBVyxDQUFDLENBQUM7RUFDeEMsSUFBSSxPQUFPSCxHQUFHLENBQUNJLFdBQVcsS0FBSyxVQUFVLEVBQ3ZDLE9BQU87SUFBRUMsT0FBTyxFQUFFLEtBQUs7SUFBRUMsT0FBT0EsQ0FBQSxFQUFJLENBQUM7RUFBRSxDQUFDO0VBRTFDLFNBQVNGLFdBQVdBLENBQUNHLEtBQUssRUFBRUMsTUFBTSxHQUFHO0lBQUVDLE9BQU8sRUFBQyxLQUFLO0lBQUVDLFVBQVUsRUFBQyxLQUFLO0lBQUVDLE1BQU0sRUFBQ0M7RUFBVSxDQUFDLEVBQUU7SUFDMUYsTUFBTUMsR0FBRyxHQUFHWCxHQUFHLENBQUNZLFdBQVcsQ0FBQyxhQUFhLENBQUM7SUFDMUNELEdBQUcsQ0FBQ0UsZUFBZSxDQUFDUixLQUFLLEVBQUVDLE1BQU0sQ0FBQ0MsT0FBTyxFQUFFRCxNQUFNLENBQUNFLFVBQVUsRUFBRUYsTUFBTSxDQUFDRyxNQUFNLENBQUM7SUFDNUUsT0FBT0UsR0FBRztFQUNaO0VBQ0FULFdBQVcsQ0FBQ1ksU0FBUyxHQUFHaEIsR0FBRyxDQUFDaUIsS0FBSyxDQUFDRCxTQUFTO0VBQzNDaEIsR0FBRyxDQUFDSSxXQUFXLEdBQUdBLFdBQVc7RUFFN0JOLE1BQU0sRUFBRW9CLElBQUksR0FBRywrQkFBK0IsRUFBRTtJQUFFQyxPQUFPLEVBQUU7RUFBc0IsQ0FBQyxDQUFDO0VBQ25GLE9BQU87SUFDTGQsT0FBTyxFQUFFLElBQUk7SUFDYkMsT0FBT0EsQ0FBQSxFQUFJO01BQUUsT0FBT04sR0FBRyxDQUFDSSxXQUFXO0lBQUU7RUFDdkMsQ0FBQztBQUNIIiwiaWdub3JlTGlzdCI6W119