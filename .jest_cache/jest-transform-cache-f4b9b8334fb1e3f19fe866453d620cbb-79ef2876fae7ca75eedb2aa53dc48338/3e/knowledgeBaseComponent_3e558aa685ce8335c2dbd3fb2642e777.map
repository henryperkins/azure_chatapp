{"version":3,"names":["_selectorConstants","require","MODULE","createKnowledgeBaseComponent","options","DS","DependencySystem","Error","dsModules","modules","getDep","name","get","sanitizer","app","projectManager","eventHandlers","uiUtils","modalManager","domAPI","domReadinessService","logger","appBus","authModule","authBus","AuthBus","createKnowledgeBaseManager","createKnowledgeBaseSearchHandler","sanitize","elRefs","elementSelectors","ELEMENT_SELECTORS","KB","searchInput","searchButton","resultsContainer","resultsSection","noResultsSection","topKSelect","resultModal","resultTitle","resultSource","resultScore","resultContent","useInChatBtn","kbGitHubAttachedRepoInfo","kbAttachedRepoUrlDisplay","kbAttachedRepoBranchDisplay","kbDetachRepoBtn","kbGitHubAttachForm","kbGitHubRepoUrlInput","kbGitHubBranchInput","kbGitHubFilePathsTextarea","kbAttachRepoBtn","container","activeSection","inactiveSection","statusBadge","kbToggle","toggle","reprocessButton","setupButton","settingsButton","kbNameDisplay","baseName","kbModelDisplay","modelDisplay","kbVersionDisplay","versionDisplay","kbLastUsedDisplay","lastUsedDisplay","settingsModal","settingsForm","cancelSettingsBtn","deleteKnowledgeBaseBtn","deleteBtn","modelSelect","knowledgeBaseFilesSection","filesSection","knowledgeBaseFilesListContainer","filesListContainer","knowledgeFileCount","docCount","knowledgeChunkCount","chunkCount","knowledgeFileSize","fileSize","validateUUID","apiRequest","config","maxConcurrentProcesses","searchDebounceTime","minQueryLength","maxQueryLength","_safeSetInnerHTML","el","html","setInnerHTML","KnowledgeBaseComponent","constructor","elements","state","knowledgeBase","isSearching","searchCache","Map","fileProcessingQueue","activeProcesses","lastHealthCheck","initialized","formatBytes","formatDate","fileIcon","scheduler","setTimeout","clearTimeout","isInitialized","_setButtonLoading","btn","isLoading","loadingText","disabled","dataset","originalText","textContent","_showInactiveState","bind","_updateStatusIndicator","_updateStatusAlerts","_updateUploadButtonsState","renderKnowledgeBaseInfo","_debounce","searchHandler","manager","_initializeSearchHandler","initialize","debug","context","error","message","_initElements","OPTIONAL_KEYS","Set","_reqEl","key","selector","getElementById","has","sel","startsWith","querySelector","isVisible","kbData","projectId","classList","remove","requiredSelectors","Object","entries","filter","map","includes","push","info","id","dependenciesAndElements","domSelectors","deps","timeout","APP_CONFIG","TIMEOUTS","COMPONENT_ELEMENTS_READY","optional","_bindEventHandlers","dispatchEvent","getDocument","CustomEvent","detail","success","add","auth","authIsReady","isReady","Promise","resolve","readyTarget","trackListener","once","description","isAuthenticated","warn","renderOrClear","kbId","EH","_DA","MODULE_CONTEXT","addListener","elRef","type","fn","opts","element","triggerSearch","e","debouncedSearch","target","value","handleResultModalKeydown","toggleKnowledgeBase","checked","pid","_getCurrentProjectId","reprocessFiles","showModalHandler","showKnowledgeBaseModal","handleKnowledgeBaseFormSubmit","hideKnowledgeBaseModal","handleDeleteKnowledgeBase","validateSelectedModelDimensions","handleAttachGitHubRepo","handleDetachGitHubRepo","_handleAppCurrentProjectChanged","_updateBadgeState","badgeEl","className","ev","status","_handleAuthStateChange","authenticated","event","newProject","project","oldProject","previousProject","newProjectId","oldProjectId","currentInternalKBProjectId","project_id","closeModal","err","getProjectId","cur","currentProject","appModuleRef","currentProjectId","_updateBasicInfo","_updateModelSelection","embedding_model","is_active","loadKnowledgeBaseHealth","catch","loadKnowledgeBaseFiles","kbIsActive","_renderKnowledgeBaseFiles","files","pagination","total","knowledgeBaseId","kb","version","last_used","isActive","badge","hasKB","kbDependentEls","querySelectorAll","forEach","title","fileCountEl","fileCount","parseInt","reDisabled","_kb","_showStatusAlert","statusIndicator","cls","alertDiv","createElement","setAttribute","removeChild","appendChild","wait","a","apply","authDependentElements","removeAttribute","KnowledgeBaseComponentWithDestroy","destroy","ds","cleanupModuleListeners","cleanupListeners","instance","_origCleanup","cleanup","args","publicAPI","Proxy","t","p","r","v","Reflect","set","ownKeys","k","getOwnPropertyDescriptor","undefined","_default","exports","default"],"sources":["knowledgeBaseComponent.js"],"sourcesContent":["/**\n * @module knowledgeBaseComponent\n * @description Refactored factory: NO global document/window. All DOM and event wiring via DI.\n */\n\n// All sub-factories must be resolved via DependencySystem to respect DI guard-rails.\nimport { ELEMENT_SELECTORS } from './utils/selectorConstants.js';\n\nconst MODULE = \"KnowledgeBaseComponent\";\n/**\n * Creates and returns a knowledge base UI component instance with full lifecycle management.\n *\n * This factory function resolves all required dependencies via the provided options or dependency injection system, validates their presence, and constructs a knowledge base component that manages UI rendering, event handling, authentication state, and project context changes. The returned component exposes methods for initialization, rendering, and cleanup, and integrates with injected services for DOM manipulation, event tracking, and logging.\n *\n * @param {Object} [options={}] - Configuration and dependency injection options.\n * @returns {KnowledgeBaseComponentWithDestroy} An instance of the knowledge base component with destroy capability.\n *\n * @throws {Error} If required dependencies such as `DependencySystem`, `logger`, `sanitizer`, `app`, `projectManager`, `eventHandlers`, `uiUtils`, `modalManager`, or `domAPI` are missing or invalid.\n */\nexport function createKnowledgeBaseComponent(options = {}) {\n  const DS = options.DependencySystem;\n  if (!DS) throw new Error(\"DependencySystem is required for KnowledgeBaseComponent\");\n  const dsModules = DS.modules;\n  const getDep = (name) => (name in options ? options[name] : dsModules.get(name));\n\n  const sanitizer = getDep(\"sanitizer\");\n  const app = getDep(\"appModule\") || getDep(\"app\");\n  const projectManager = getDep(\"projectManager\");\n  const eventHandlers = getDep(\"eventHandlers\");\n  const uiUtils = getDep(\"uiUtils\") || getDep(\"uiUtilsInstance\");\n  const modalManager = getDep(\"modalManager\");\n  const domAPI = getDep(\"domAPI\");\n  const domReadinessService = getDep(\"domReadinessService\");\n  const logger = getDep(\"logger\"); // Ensure logger is fetched for constructor scope if needed early\n\n  // ---------------------------------------------------------------------------\n  // Resolve buses and auth module ONCE at factory-time so that no runtime\n  // All required dependencies are resolved at factory-time via getDep – no additional\n  // container look-ups occur after instantiation (guard-rails compliant).\n  // the 2025 guard-rail: *zero* runtime DI queries after instantiation.\n  // ---------------------------------------------------------------------------\n  const appBus = getDep(\"AppBus\");\n  const authModule = getDep(\"auth\");\n  // AuthBus is optional – fall back to null so downstream code branches cleanly.\n  const authBus = getDep(\"AuthBus\") || authModule?.AuthBus || null;\n\n  // Resolve KB sub-factories via DI (registered in appInitializer)\n  const createKnowledgeBaseManager = getDep(\"KBManagerFactory\");\n  const createKnowledgeBaseSearchHandler = getDep(\"KBSearchHandlerFactory\");\n\n  if (!createKnowledgeBaseManager || typeof createKnowledgeBaseManager !== 'function') {\n    throw new Error(`[${MODULE}] Missing KBManagerFactory (createKnowledgeBaseManager) in DependencySystem`);\n  }\n  if (!createKnowledgeBaseSearchHandler || typeof createKnowledgeBaseSearchHandler !== 'function') {\n    throw new Error(`[${MODULE}] Missing KBSearchHandlerFactory (createKnowledgeBaseSearchHandler) in DependencySystem`);\n  }\n\n  if (!domReadinessService)\n    throw new Error(`[${MODULE}] requires 'domReadinessService' DI`);\n  if (!logger)\n    throw new Error(`[${MODULE}] requires 'logger' DI`);\n  if (!sanitizer || typeof sanitizer.sanitize !== 'function')\n    throw new Error(`[${MODULE}] requires 'sanitizer' (object with .sanitize).`);\n  if (!app || !projectManager || !eventHandlers || !uiUtils || !modalManager) {\n    throw new Error(\n      `[${MODULE}] requires 'app', 'projectManager', 'eventHandlers', 'uiUtils', and 'modalManager' dependencies.`\n    );\n  }\n  if (!domAPI) throw new Error(`${MODULE} requires 'domAPI' abstraction for DOM access.`);\n\n  // --- Element Selectors (resolution deferred to init) ---\n  const elRefs = options.elRefs || {}; // For externally provided elements\n  // Removed reqEl function from factory scope. It will be part of _initElements.\n\n  // --- domReadinessService Rule 7 compliance: replace any DependencySystem.waitFor(['app']) with domReadinessService.waitForEvent('app:ready', ...)\n  // (No such code found in this file, so nothing to replace here.)\n\n  // Use centralized selectors for consistency\n  const elementSelectors = {\n    ...ELEMENT_SELECTORS.KB,\n    // Add any additional selectors not in the centralized config\n    searchInput: \"knowledgeSearchInput\", // Optional - will be added to HTML\n    searchButton: \"searchKnowledgeBtn\", // Optional - will be added to HTML\n    resultsContainer: \"knowledgeResults\",\n    resultsSection: \"knowledgeResults\",\n    noResultsSection: \"noResults\",\n    topKSelect: \"knowledgeTopK\",\n    resultModal: \"knowledgeResultModal\",\n    resultTitle: \"knowledgeResultTitle\",\n    resultSource: \"knowledgeResultSource\",\n    resultScore: \"knowledgeResultScore\",\n    resultContent: \"knowledgeResultContent\",\n    useInChatBtn: \"useInChatBtn\",\n    kbGitHubAttachedRepoInfo: \"kbGitHubAttachedRepoInfo\",\n    kbAttachedRepoUrlDisplay: \"kbAttachedRepoUrlDisplay\",\n    kbAttachedRepoBranchDisplay: \"kbAttachedRepoBranchDisplay\",\n    kbDetachRepoBtn: \"kbDetachRepoBtn\",\n    kbGitHubAttachForm: \"kbGitHubAttachForm\",\n    kbGitHubRepoUrlInput: \"kbGitHubRepoUrlInput\",\n    kbGitHubBranchInput: \"kbGitHubBranchInput\",\n    kbGitHubFilePathsTextarea: \"kbGitHubFilePathsTextarea\",\n    kbAttachRepoBtn: \"kbAttachRepoBtn\",\n    // Map centralized names to local names for backward compatibility\n    container: ELEMENT_SELECTORS.KB.container,\n    activeSection: ELEMENT_SELECTORS.KB.activeSection,\n    inactiveSection: ELEMENT_SELECTORS.KB.inactiveSection,\n    statusBadge: ELEMENT_SELECTORS.KB.statusBadge,\n    kbToggle: ELEMENT_SELECTORS.KB.toggle,\n    reprocessButton: ELEMENT_SELECTORS.KB.reprocessButton,\n    setupButton: ELEMENT_SELECTORS.KB.setupButton,\n    settingsButton: ELEMENT_SELECTORS.KB.settingsButton,\n    kbNameDisplay: ELEMENT_SELECTORS.KB.baseName,\n    kbModelDisplay: ELEMENT_SELECTORS.KB.modelDisplay,\n    kbVersionDisplay: ELEMENT_SELECTORS.KB.versionDisplay,\n    kbLastUsedDisplay: ELEMENT_SELECTORS.KB.lastUsedDisplay,\n    settingsModal: ELEMENT_SELECTORS.KB.settingsModal,\n    settingsForm: ELEMENT_SELECTORS.KB.settingsForm,\n    cancelSettingsBtn: ELEMENT_SELECTORS.KB.cancelSettingsBtn,\n    deleteKnowledgeBaseBtn: ELEMENT_SELECTORS.KB.deleteBtn,\n    modelSelect: ELEMENT_SELECTORS.KB.modelSelect,\n    knowledgeBaseFilesSection: ELEMENT_SELECTORS.KB.filesSection,\n    knowledgeBaseFilesListContainer: ELEMENT_SELECTORS.KB.filesListContainer,\n    knowledgeFileCount: ELEMENT_SELECTORS.KB.docCount,\n    knowledgeChunkCount: ELEMENT_SELECTORS.KB.chunkCount,\n    knowledgeFileSize: ELEMENT_SELECTORS.KB.fileSize,\n  };\n\n  // Resolve validateUUID and apiRequest with robust fallbacks\n  const validateUUID = app.validateUUID;\n  const apiRequest =\n    // 1. Explicit override via factory options\n    options.apiRequest\n    // 2. DependencySystem registration (e.g., after advanced services phase)\n    || getDep(\"apiRequest\")\n    // 3. Fallback to app proxy (may still be a placeholder in early phases)\n    || app.apiRequest;\n  const config = {\n    maxConcurrentProcesses: options.maxConcurrentProcesses || 3,\n    searchDebounceTime: options.searchDebounceTime || 300,\n    minQueryLength: options.minQueryLength || 2,\n    maxQueryLength: options.maxQueryLength || 500,\n  };\n\n  function _safeSetInnerHTML(el, html) {\n    if (!el) return;\n    domAPI.setInnerHTML(el, html);\n  }\n\n  class KnowledgeBaseComponent {\n    constructor() {\n      this.app = app;\n      this.projectManager = projectManager;\n      this.eventHandlers = eventHandlers;\n      this.uiUtils = uiUtils;\n      this.apiRequest = apiRequest;\n      this.validateUUID = validateUUID;\n      this.config = config;\n      this.modalManager = modalManager;\n      this.domAPI = domAPI;\n      this.getDep = getDep;\n      this.DependencySystem = DS;\n      this.domReadinessService = domReadinessService;\n      this.logger = logger; // Store logger instance\n\n      // Buses / modules captured at factory-time to avoid runtime look-ups\n      this.appBus = appBus;\n      this.authModule = authModule;\n      this.authBus = authBus;\n\n      this.elementSelectors = elementSelectors;\n      this.elements = {};\n      this.elRefs = elRefs; // Store elRefs passed in options for _initElements\n      this.state = {\n        knowledgeBase: null,\n        isSearching: false,\n        searchCache: new Map(),\n        fileProcessingQueue: [],\n        activeProcesses: 0,\n        lastHealthCheck: null,\n        // Track whether initialize() has completed successfully\n        initialized: false,\n        // CONSOLIDATED: No local authState - read from appModule.state\n      };\n\n      this.formatBytes = uiUtils.formatBytes;\n      this.formatDate = uiUtils.formatDate;\n      this.fileIcon = uiUtils.fileIcon;\n      this.scheduler = getDep(\"scheduler\") || { setTimeout, clearTimeout };\n\n      // Public helper for outside modules (via Proxy) to know init status\n      this.isInitialized = () => this.state.initialized === true;\n\n      // Provide all cb/utilities needed by manager/searchHandler\n      this._safeSetInnerHTML = _safeSetInnerHTML;\n      this._setButtonLoading = function (btn, isLoading, loadingText = \"Saving...\") {\n        if (!btn) return;\n        if (isLoading) {\n          btn.disabled = true;\n          btn.dataset.originalText = btn.textContent;\n          _safeSetInnerHTML(btn, `<span class=\"loading loading-spinner loading-xs\"></span> ${loadingText}`);\n        } else {\n          btn.disabled = false;\n          if (btn.dataset.originalText) {\n            btn.textContent = btn.dataset.originalText;\n            delete btn.dataset.originalText;\n          }\n        }\n      };\n\n      // Add utility methods needed by manager\n      this._showInactiveState = this._showInactiveState.bind(this);\n      this._updateStatusIndicator = this._updateStatusIndicator.bind(this);\n      this._updateStatusAlerts = this._updateStatusAlerts.bind(this);\n      this._updateUploadButtonsState = this._updateUploadButtonsState.bind(this);\n      this.renderKnowledgeBaseInfo = this.renderKnowledgeBaseInfo.bind(this);\n\n      // For model/validation logic\n      this._debounce = this._debounce.bind(this);\n\n      // Initialize handlers asynchronously\n      this.searchHandler = null;\n      this.manager = createKnowledgeBaseManager(this);\n\n      // this._bindEventHandlers(); // Call this after _initElements in initialize\n    }\n\n    async _initializeSearchHandler() {\n      try {\n        this.searchHandler = createKnowledgeBaseSearchHandler(this);\n        await this.searchHandler.initialize?.();\n        this.logger.debug(`[${MODULE}] Search handler initialized successfully.`, { context: MODULE });\n      } catch (error) {\n        this.logger.error(`[${MODULE}] Failed to initialize search handler: ${error.message}`, { error, context: MODULE });\n        this.searchHandler = null;\n      }\n    }\n\n    _initElements() {\n      const OPTIONAL_KEYS = new Set([\n        'activeSection', 'inactiveSection', 'statusBadge', 'modelSelect',\n        'searchInput', 'searchButton', // Search elements are optional (not in current HTML)\n        'kbToggle', 'reprocessButton', 'setupButton', 'settingsButton',\n        'kbNameDisplay', 'kbModelDisplay', 'kbVersionDisplay', 'kbLastUsedDisplay',\n        'knowledgeBaseFilesSection', 'knowledgeBaseFilesListContainer',\n        'kbGitHubAttachedRepoInfo', 'kbAttachedRepoUrlDisplay',\n        'kbAttachedRepoBranchDisplay', 'kbDetachRepoBtn',\n        'kbGitHubAttachForm', 'kbGitHubRepoUrlInput',\n        'kbGitHubBranchInput', 'kbGitHubFilePathsTextarea', 'kbAttachRepoBtn',\n        'knowledgeFileCount', 'knowledgeChunkCount', 'knowledgeFileSize',\n        'noResultsSection', 'topKSelect', 'resultsContainer', 'resultsSection',\n        'settingsModal', 'settingsForm', 'cancelSettingsBtn', 'deleteKnowledgeBaseBtn',\n        'resultModal', 'resultTitle', 'resultSource', 'resultScore', 'resultContent', 'useInChatBtn'\n      ]);\n      const _reqEl = (key, selector) => {\n        // Prioritize elRefs if provided for a key\n        const el = this.elRefs[key] || this.domAPI.getElementById(selector);\n        if (!el && !OPTIONAL_KEYS.has(key)) {\n          throw new Error(`[${MODULE}] Missing required element/ref: ${key} (${selector})`);\n        }\n        return el;          // may be null for optional keys\n      };\n\n      for (const key in this.elementSelectors) {\n        // Remap legacy 'knowledgeNoResults' property everywhere to 'noResultsSection'\n        const selector = this.elementSelectors[key];\n        const sel = typeof selector === 'string'\n          ? (selector.startsWith('#') || selector.startsWith('.')\n            ? selector\n            : `#${selector}`)\n          : selector;\n        this.elements[key === \"noResultsSection\" ? \"noResultsSection\" : key] = this.elRefs[key] || this.domAPI.querySelector(sel);\n      }\n    }\n\n    async initialize(isVisible, kbData = null, projectId = null) {\n      if (this.state.initialized) {\n        // Already initialised – optionally update visibility only\n        if (isVisible && this.elements?.container) {\n          this.elements.container.classList.remove('hidden');\n        }\n        return;\n      }\n      // Build selector list excluding optional search/UI selectors so\n      // domReadinessService does not wait for elements that may not be\n      // present in certain templates (e.g., mobile view without KB search).\n      const OPTIONAL_KEYS = new Set([\n        'searchInput', 'searchButton', 'modelSelect',\n        'resultsContainer', 'resultsSection',\n        'noResultsSection', 'topKSelect',\n        'resultModal', 'resultTitle', 'resultSource',\n        'resultScore', 'resultContent', 'useInChatBtn'\n      ]);\n\n      const requiredSelectors = Object.entries(this.elementSelectors)\n        .filter(([key]) => !OPTIONAL_KEYS.has(key))\n        .map(([, sel]) =>\n          (sel.startsWith('#') || sel.startsWith('.')) ? sel : `#${sel}`\n        );\n\n      // Always ensure the root KB container participates in readiness check\n      if (!requiredSelectors.includes('#knowledgeTab')) {\n        requiredSelectors.push('#knowledgeTab');\n      }\n\n      this.logger.info(`[${MODULE}] Initializing. Received isVisible: ${isVisible}, kbData ID: ${kbData?.id}, projectId: ${projectId}`, { context: MODULE });\n\n      await this.domReadinessService.dependenciesAndElements({\n        domSelectors: requiredSelectors,\n        deps: ['auth', 'AppBus'], // Ensure auth and AppBus are ready for listeners\n        context: MODULE + '::initializeDOM',\n        timeout: this.app?.APP_CONFIG?.TIMEOUTS?.COMPONENT_ELEMENTS_READY ?? 8000,\n        optional: true\n      });\n      this.logger.debug(`[${MODULE}] DOM elements and core deps (auth, AppBus) ready.`, { context: MODULE });\n\n      try {\n        this._initElements();\n        await this._initializeSearchHandler();\n        this._bindEventHandlers(); // Bind handlers after elements are initialized\n\n        // Mark component as fully initialised to prevent re-initialisation.\n        this.state.initialized = true;\n      } catch (error) {\n        this.logger.error(`[${MODULE}] Failed to initialize elements or bind handlers: ${error.message}`, { error, context: MODULE });\n        this.domAPI.dispatchEvent(\n          this.domAPI.getDocument(),\n          new CustomEvent('knowledgebasecomponent:initialized', { detail: { success: false, error } })\n        );\n        this.elements.container?.classList.add(\"hidden\");\n        return;\n      }\n\n      // Use injected authBus / authModule captured during factory construction\n      const auth = this.authModule;\n      const authIsReady =\n        typeof auth?.isReady === 'function'\n          ? auth.isReady()\n          : this.app?.state?.isReady === true;\n      if (!authIsReady) {\n        this.logger.info(\n          `[${MODULE}] Auth module not ready yet, waiting for authReady event.`,\n          { context: MODULE }\n        );\n        await new Promise((resolve) => {\n          // Prefer AuthBus, but fall back to document-level event for safety\n          const readyTarget = auth?.AuthBus || this.domAPI.getDocument();\n          this.eventHandlers.trackListener(\n            readyTarget,\n            'authReady',\n            () => {\n              this.logger.info(\n                `[${MODULE}] Received authReady event during init.`,\n                { context: MODULE }\n              );\n              resolve();\n            },\n            { once: true, context: MODULE, description: 'KB_Init_AuthReady' }\n          );\n        });\n      }\n      this.logger.info(`[${MODULE}] Auth module is now ready. App authenticated: ${this.app.state.isAuthenticated}`, { context: MODULE });\n\n      if (!this.app.state.isAuthenticated) {\n        this.logger.warn(`[${MODULE}] User not authenticated. Showing inactive state and hiding component.`, { context: MODULE });\n        this._showInactiveState();\n        this.elements.container?.classList.add(\"hidden\");\n        this.domAPI.dispatchEvent(\n          this.domAPI.getDocument(),\n          new CustomEvent('knowledgebasecomponent:initialized', { detail: { success: true, message: 'Initialized but hidden due to auth state.' } })\n        );\n        return;\n      }\n\n      this.logger.info(`[${MODULE}] First-time initialization logic running.`, { context: MODULE });\n\n      await this.renderOrClear(kbData, projectId);\n\n      if (this.elements.container) {\n        this.elements.container.classList.toggle(\"hidden\", !isVisible);\n        this.elements.container.classList.toggle(\"pointer-events-none\", !isVisible);\n      }\n\n      this.domAPI.dispatchEvent(\n        this.domAPI.getDocument(),\n        new CustomEvent('knowledgebasecomponent:initialized', { detail: { success: true } })\n      );\n      this.logger.info(`[${MODULE}] Initialization complete. Final visibility: ${isVisible}`, { context: MODULE });\n    }\n\n    async renderOrClear(kbData, projectId) {\n      if (kbData) {\n        this.logger.debug(`[${MODULE}] Rendering with provided kbData.`, { kbId: kbData.id, projectId, context: MODULE });\n        await this.renderKnowledgeBaseInfo(kbData, projectId);\n      } else if (projectId) {\n        this.logger.debug(`[${MODULE}] No kbData, but projectId ${projectId} provided. Attempting to load KB via manager.`, { context: MODULE });\n        // This implies manager should fetch if only projectId is given.\n        // For now, KBM's loadKnowledgeBase is called by projectManager, not directly by component on project change without kbData.\n        // So, if kbData is null here, it means no KB exists or it shouldn't be shown.\n        this._showInactiveState(); // Show inactive if no explicit kbData\n        this.domAPI.dispatchEvent(\n          this.domAPI.getDocument(),\n          new CustomEvent('projectKnowledgeBaseRendered', { detail: { projectId } })\n        );\n      } else {\n        this.logger.debug(`[${MODULE}] No kbData or projectId. Showing inactive state.`, { context: MODULE });\n        this._showInactiveState();\n      }\n    }\n\n    _bindEventHandlers() {\n      this.logger.debug(`[${MODULE}] Binding event handlers.`, { context: MODULE });\n      const EH = this.eventHandlers;\n      const _DA = this.domAPI; // underscore-prefixed to satisfy no-unused-vars\n      const MODULE_CONTEXT = MODULE; // Defined at the top of the factory\n\n      const addListener = (elRef, type, fn, opts = {}) => {\n        const element = typeof elRef === 'string' ? this.elements[elRef] : elRef;\n        if (element) {\n          EH.trackListener(element, type, fn, {\n            ...opts,\n            context: MODULE_CONTEXT,\n            description: opts.description || `${elRef}_${type}`\n          });\n        } else {\n          // When optional UI fragments (e.g., mobile view without search bar) are\n          // not present, quietly skip listener registration.  A debug-level log\n          // prevents noisy WARN spam while still allowing deep diagnostics when\n          // LOG_LEVEL is set to DEBUG.\n          this.logger.debug(\n            `[${MODULE}] Optional element ref \"${elRef}\" absent – skipped ${type} listener registration.`,\n            { context: MODULE_CONTEXT }\n          );\n        }\n      };\n\n      // Search UI\n      addListener(\"searchButton\", \"click\", () => {\n        if (this.searchHandler && typeof this.searchHandler.triggerSearch === 'function') {\n          this.searchHandler.triggerSearch();\n        } else {\n          this.logger.error(`[${MODULE}] searchHandler.triggerSearch is not available`, {\n            searchHandler: this.searchHandler,\n            context: MODULE_CONTEXT\n          });\n        }\n      });\n      addListener(\"searchInput\", \"input\", (e) => {\n        if (this.searchHandler && typeof this.searchHandler.debouncedSearch === 'function') {\n          this.searchHandler.debouncedSearch(e.target.value);\n        } else {\n          this.logger.error(`[${MODULE}] searchHandler.debouncedSearch is not available`, {\n            searchHandler: this.searchHandler,\n            context: MODULE_CONTEXT\n          });\n        }\n      });\n      addListener(\"searchInput\", \"keyup\", (e) => {\n        if (e.key === \"Enter\") {\n          if (this.searchHandler && typeof this.searchHandler.triggerSearch === 'function') {\n            this.searchHandler.triggerSearch();\n          } else {\n            this.logger.error(`[${MODULE}] searchHandler.triggerSearch is not available`, {\n              searchHandler: this.searchHandler,\n              context: MODULE_CONTEXT\n            });\n          }\n        }\n      });\n      addListener(\"resultModal\", \"keydown\", (e) => {\n        if (this.searchHandler && typeof this.searchHandler.handleResultModalKeydown === 'function') {\n          this.searchHandler.handleResultModalKeydown(e);\n        } else {\n          this.logger.error(`[${MODULE}] searchHandler.handleResultModalKeydown is not available`, {\n            searchHandler: this.searchHandler,\n            context: MODULE_CONTEXT\n          });\n        }\n      });\n\n      // Management UI\n      addListener(\"kbToggle\", \"change\", (e) => this.manager.toggleKnowledgeBase(e.target.checked));\n      addListener(\"reprocessButton\", \"click\", () => {\n        const pid = this._getCurrentProjectId();\n        if (pid) this.manager.reprocessFiles(pid); else this.logger.warn(`[${MODULE}] Reprocess clicked but no current project ID found.`, { context: MODULE_CONTEXT });\n      });\n\n      const showModalHandler = () => this.manager.showKnowledgeBaseModal();\n      addListener(\"setupButton\", \"click\", showModalHandler);\n      addListener(\"settingsButton\", \"click\", showModalHandler);\n      addListener(\"settingsForm\", \"submit\", (e) => this.manager.handleKnowledgeBaseFormSubmit(e));\n      addListener(\"cancelSettingsBtn\", \"click\", () => this.manager.hideKnowledgeBaseModal());\n      addListener(\"deleteKnowledgeBaseBtn\", \"click\", () => this.manager.handleDeleteKnowledgeBase());\n      addListener(\"modelSelect\", \"change\", () => this.manager.validateSelectedModelDimensions());\n\n      // GitHub integration\n      addListener(\"kbAttachRepoBtn\", \"click\", () => this.manager.handleAttachGitHubRepo());\n      addListener(\"kbDetachRepoBtn\", \"click\", () => this.manager.handleDetachGitHubRepo());\n\n      // Listen to AppBus for currentProjectChanged\n      const appBus = this.appBus;\n      if (appBus) {\n        EH.trackListener(appBus, 'currentProjectChanged', this._handleAppCurrentProjectChanged.bind(this),\n          { context: MODULE, description: 'KBComponent_AppBus_CurrentProjectChanged' });\n        this.logger.debug(`[${MODULE}] Subscribed to AppBus \"currentProjectChanged\".`, { context: MODULE });\n\n        // ────────────────────────────────────────────────────────────────\n        // Week-3: Observability – update status badge based on KB events\n        // ────────────────────────────────────────────────────────────────\n\n        // Helper inline so it captures `this` context cleanly\n        const _updateBadgeState = (state) => {\n          const badgeEl = this.elements.statusBadge;\n          if (!badgeEl) return;\n          switch (state) {\n            case 'processing':\n              badgeEl.className = 'badge badge-warning badge-sm';\n              badgeEl.textContent = 'Processing';\n              break;\n            case 'ready':\n              badgeEl.className = 'badge badge-success badge-sm';\n              badgeEl.textContent = 'Ready';\n              break;\n            case 'error':\n              badgeEl.className = 'badge badge-error badge-sm';\n              badgeEl.textContent = 'Error';\n              break;\n            default:\n              // fallback to inactive styling handled elsewhere\n              break;\n          }\n        };\n\n        EH.trackListener(appBus, 'knowledgebase:jobProgress', (ev) => {\n          const status = ev?.detail?.status;\n          if (status === 'processing' || status === 'pending') {\n            _updateBadgeState('processing');\n          }\n        }, { context: MODULE, description: 'KBComponent_KB_JobProgress' });\n\n        EH.trackListener(appBus, 'knowledgebase:ready', () => {\n          _updateBadgeState('ready');\n        }, { context: MODULE, description: 'KBComponent_KB_Ready' });\n      } else {\n        this.logger.error(`[${MODULE}] AppBus not available. Cannot subscribe to \"currentProjectChanged\". Critical for functionality.`, { context: MODULE });\n      }\n\n      // Listen to AuthBus for authStateChanged (more direct than document)\n      if (this.authBus) {\n        EH.trackListener(this.authBus, \"authStateChanged\", (e) => {\n          this.logger.debug(`[${MODULE}] AuthBus authStateChanged event received.`, { detail: e.detail, context: MODULE_CONTEXT });\n          this._handleAuthStateChange(e.detail?.authenticated);\n        }, { description: \"KB AuthBus authStateChanged Listener\", context: MODULE_CONTEXT });\n        this.logger.debug(`[${MODULE}] Subscribed to AuthBus \"authStateChanged\".`, { context: MODULE });\n      } else {\n        // Fallback to document listener if AuthBus isn't available (though it should be via DI)\n        this.logger.warn(`[${MODULE}] AuthBus not available. Falling back to document listener for \"authStateChanged\".`, { context: MODULE });\n        addListener(this.domAPI.getDocument(), \"authStateChanged\", (e) => {\n          this._handleAuthStateChange(e.detail?.authenticated);\n        }, { description: \"KB Document authStateChanged Listener (Fallback)\", context: MODULE_CONTEXT });\n      }\n    }\n\n    _handleAppCurrentProjectChanged(event) {\n      const newProject = event?.detail?.project;\n      const oldProject = event?.detail?.previousProject; // May be useful for cleanup\n      this.logger.info(`[${MODULE}] Event \"currentProjectChanged\" received via AppBus.`, {\n        newProjectId: newProject?.id,\n        oldProjectId: oldProject?.id,\n        currentInternalKBProjectId: this.state.knowledgeBase?.project_id,\n        context: MODULE\n      });\n\n      // Close any open KB-related modals to avoid memory leaks / stale UI\n      try {\n        this.modalManager?.closeModal?.('*');\n      } catch (err) {\n        this.logger.warn(`[${MODULE}] Failed to close KB modals on project change`, { err, context: MODULE });\n      }\n\n      if (newProject?.id && newProject.id !== this.state.knowledgeBase?.project_id) {\n        this.logger.info(`[${MODULE}] New project selected (${newProject.id}). Resetting KB view. Manager will load new KB.`, { context: MODULE });\n        // Reset UI to prepare for new project's KB.\n        // The actual fetching of KB data is expected to be triggered by an orchestrator (e.g. projectDetailsComponent)\n        // which would call this.initialize() or this.manager.loadKnowledgeBase()\n        // For now, simply clear and show inactive.\n        this._showInactiveState();\n        this.state.knowledgeBase = null; // Clear internal KB state\n        // It is assumed another component (like projectDetailsComponent) will call this.initialize()\n        // with the new project's KB data or trigger manager.loadKnowledgeBase().\n        // If this component should be fully autonomous, it would call:\n        // this.manager.loadKnowledgeBase(newProject.id);\n      } else if (!newProject && this.state.knowledgeBase) {\n        this.logger.info(`[${MODULE}] Project context cleared. Resetting KB view.`, { context: MODULE });\n        this._showInactiveState();\n        this.state.knowledgeBase = null;\n      }\n    }\n\n    _getCurrentProjectId() {\n      if (typeof this.app.getProjectId === \"function\") {\n        const pid = this.app.getProjectId();\n        if (this.validateUUID(pid)) return pid;\n      }\n      const cur = this.projectManager.currentProject;\n      if (cur?.id && this.validateUUID(cur.id)) {\n        return cur.id;\n      }\n      // Fallback: use global appModule state if available (Week-1 guard-rail compliant)\n      const appModuleRef = this.app;\n      if (appModuleRef?.state?.currentProjectId && this.validateUUID(appModuleRef.state.currentProjectId)) {\n        return appModuleRef.state.currentProjectId;\n      }\n      // notification/logging removed\n      return null;\n    }\n\n    async renderKnowledgeBaseInfo(kbData, projectId = null) {\n      if (!kbData) {\n        this._showInactiveState();\n        this.elements.knowledgeBaseFilesSection?.classList.add(\"hidden\");\n        if (projectId) {\n          this.domAPI.dispatchEvent(\n            this.domAPI.getDocument(),\n            new CustomEvent('projectKnowledgeBaseRendered', { detail: { projectId } })\n          );\n        }\n        return;\n      }\n\n      this.state.knowledgeBase = kbData;\n      const currentProjectId = projectId || kbData.project_id || this._getCurrentProjectId();\n      this.logger.info(`[${MODULE}] Rendering KB Info for KB ID: ${kbData.id}, Project ID: ${currentProjectId}`, { kbData, context: MODULE });\n\n      if (this.elements.activeSection?.dataset) {\n        this.elements.activeSection.dataset.projectId = currentProjectId || \"\";\n      }\n      this._updateBasicInfo(kbData);\n      this.manager._updateModelSelection(kbData.embedding_model); // Manager might need this method if it manipulates the select\n      this._updateStatusIndicator(kbData.is_active !== false);\n\n      this.elements.activeSection?.classList.remove(\"hidden\");\n      this.elements.inactiveSection?.classList?.add(\"hidden\");\n      if (this.elements.kbToggle) {\n        this.elements.kbToggle.checked = kbData.is_active !== false;\n      }\n\n      try {\n        if (kbData.is_active !== false && kbData.id && currentProjectId) {\n          this.logger.debug(`[${MODULE}] KB is active. Loading health and files.`, { kbId: kbData.id, projectId: currentProjectId, context: MODULE });\n          this.manager.loadKnowledgeBaseHealth(kbData.id).catch(err => this.logger.warn(`[${MODULE}] Error loading KB health (non-critical).`, { err, context: MODULE }));\n          this.manager.loadKnowledgeBaseFiles(currentProjectId, kbData.id); // This should handle its own errors and UI updates\n        } else {\n          this.logger.debug(`[${MODULE}] KB is inactive or no ID. Hiding files section and clearing list.`, { kbIsActive: kbData.is_active, kbId: kbData.id, context: MODULE });\n          this.elements.knowledgeBaseFilesSection?.classList.add(\"hidden\");\n          if (this.manager._renderKnowledgeBaseFiles) { // Assuming manager has this method for direct rendering\n            this.manager._renderKnowledgeBaseFiles({ files: [], pagination: { total: 0 } });\n          } else {\n            const container = this.elements.knowledgeBaseFilesListContainer;\n            if (container) _safeSetInnerHTML(container, '<p class=\"text-base-content/60 text-center py-4\">Knowledge Base is inactive or has no files.</p>');\n          }\n        }\n        this._updateStatusAlerts(kbData); // This seems to be for additional alerts, not main status\n        this._updateUploadButtonsState(); // Update based on new KB state\n\n        if (currentProjectId) {\n          this.domAPI.dispatchEvent(\n            this.domAPI.getDocument(),\n            new CustomEvent('projectKnowledgeBaseRendered', { detail: { projectId: currentProjectId, knowledgeBaseId: kbData.id } })\n          );\n        }\n      } catch (err) {\n        this.logger.error(`[${MODULE}] Error during post-render KB info processing (health/files load).`, { error: err, context: MODULE });\n        // Ensure event is still dispatched if there was a project ID\n        if (currentProjectId) {\n          this.domAPI.dispatchEvent(\n            this.domAPI.getDocument(),\n            new CustomEvent('projectKnowledgeBaseRendered', { detail: { projectId: currentProjectId, error: err.message } })\n          );\n        }\n      }\n    }\n\n    _updateBasicInfo(kb) {\n      const { kbNameDisplay, kbModelDisplay, kbVersionDisplay, kbLastUsedDisplay } = this.elements;\n      if (kbNameDisplay) kbNameDisplay.textContent = kb.name || \"Project Knowledge Base\";\n      if (kbModelDisplay) kbModelDisplay.textContent = kb.embedding_model || \"Not Set\";\n      if (kbVersionDisplay) kbVersionDisplay.textContent = kb.version ? `v${kb.version}` : \"v1\";\n      if (kbLastUsedDisplay) kbLastUsedDisplay.textContent = kb.last_used ? this.formatDate(kb.last_used) : \"Never used\";\n    }\n\n    _updateStatusIndicator(isActive) {\n      const badge = this.elements.statusBadge;\n      if (!badge) return;\n      badge.className = `badge ${isActive ? \"badge-success\" : \"badge-warning\"} badge-sm`;\n      badge.textContent = isActive ? \"Active\" : \"Inactive\";\n    }\n\n    _showInactiveState() {\n      this.logger.info(`[${MODULE}] Showing inactive state.`, { context: MODULE });\n      this.state.knowledgeBase = null; // Clear internal state\n\n      this.elements.activeSection?.classList.add(\"hidden\");\n      this.elements.inactiveSection?.classList.remove(\"hidden\");\n      this.elements.knowledgeBaseFilesSection?.classList.add(\"hidden\");\n\n      // Clear displayed KB info\n      if (this.elements.kbNameDisplay) this.elements.kbNameDisplay.textContent = \"N/A\";\n      if (this.elements.kbModelDisplay) this.elements.kbModelDisplay.textContent = \"N/A\";\n      if (this.elements.kbVersionDisplay) this.elements.kbVersionDisplay.textContent = \"N/A\";\n      if (this.elements.kbLastUsedDisplay) this.elements.kbLastUsedDisplay.textContent = \"N/A\";\n      if (this.elements.knowledgeFileCount) this.elements.knowledgeFileCount.textContent = \"0\";\n      if (this.elements.knowledgeChunkCount) this.elements.knowledgeChunkCount.textContent = \"0\";\n      if (this.elements.knowledgeFileSize) this.elements.knowledgeFileSize.textContent = this.formatBytes(0);\n\n\n      if (this.manager?._renderKnowledgeBaseFiles) { // Ask manager to clear its file list UI\n        this.manager._renderKnowledgeBaseFiles({ files: [], pagination: { total: 0 } });\n      } else if (this.elements.knowledgeBaseFilesListContainer) { // Fallback if manager method not available\n        _safeSetInnerHTML(this.elements.knowledgeBaseFilesListContainer, '<p class=\"text-base-content/60 text-center py-4\">No Knowledge Base active or selected.</p>');\n      }\n\n      this._updateStatusIndicator(false); // Set status badge to \"Inactive\"\n      // Consider if an alert is always needed or if the UI state is clear enough\n      // this._showStatusAlert(\"Knowledge Base is not active or configured for this project.\", \"info\");\n      this._updateUploadButtonsState(); // Disable KB-dependent buttons\n    }\n\n    _updateUploadButtonsState() {\n      const hasKB = !!this.state.knowledgeBase;\n      const isActive = hasKB && this.state.knowledgeBase.is_active !== false;\n      const kbDependentEls = this.domAPI.querySelectorAll(\"[data-requires-kb='true']\", this.elements.container);\n      kbDependentEls.forEach((el) => {\n        const disabled = !hasKB || !isActive;\n        el.disabled = disabled;\n        el.classList.toggle(\"opacity-50\", disabled);\n        el.classList.toggle(\"cursor-not-allowed\", disabled);\n        el.title = disabled ? (!hasKB ? \"Setup Knowledge Base first.\" : \"Knowledge Base must be active.\") : \"Ready to use Knowledge Base features.\";\n      });\n      if (this.elements.reprocessButton) {\n        // use the element already captured during _initElements()\n        const fileCountEl = this.elements.knowledgeFileCount\n                          || this.domAPI.getElementById(\"kbDocCount\"); // fallback\n        const fileCount   = parseInt(fileCountEl?.textContent || \"0\", 10);\n        const reDisabled = !hasKB || !isActive || fileCount === 0;\n        this.elements.reprocessButton.disabled = reDisabled;\n        this.elements.reprocessButton.classList.toggle(\"opacity-50\", reDisabled);\n        this.elements.reprocessButton.classList.toggle(\"cursor-not-allowed\", reDisabled);\n        this.elements.reprocessButton.title = !hasKB ? \"Setup Knowledge Base first.\" : !isActive ? \"Knowledge Base must be active.\" : fileCount === 0 ? \"No files to reprocess.\" : \"Reprocess files.\";\n      }\n    }\n\n    _updateStatusAlerts(_kb) {\n      // notification/logging removed; adjust as needed if visual indicator required\n    }\n\n    _showStatusAlert(message, type = \"info\") {\n      const statusIndicator = this.domAPI.getElementById(\"kbStatusIndicator\");\n      if (!statusIndicator) {\n        return;\n      }\n      statusIndicator.textContent = \"\";\n      let cls = \"alert-info\";\n      if (type === \"success\") cls = \"alert-success\";\n      else if (type === \"warning\") cls = \"alert-warning\";\n      else if (type === \"error\") cls = \"alert-error\";\n      const alertDiv = this.domAPI.createElement(\"div\");\n      alertDiv.className = `alert ${cls} shadow-xs text-sm py-2 px-3`;\n      alertDiv.setAttribute(\"role\", \"alert\");\n      _safeSetInnerHTML(alertDiv, `<span>${message}</span>`);\n      if (type !== \"error\") {\n        const btn = this.domAPI.createElement(\"button\");\n        btn.className = \"btn btn-xs btn-ghost btn-circle\";\n        btn.textContent = \"✕\";\n        this.eventHandlers.trackListener(\n          btn,\n          'click',\n          () => this.domAPI.removeChild(statusIndicator, alertDiv),\n          { context: MODULE, description: 'dismissStatusAlert' }\n        );\n        this.domAPI.appendChild(alertDiv, btn);\n      }\n      this.domAPI.appendChild(statusIndicator, alertDiv);\n    }\n\n    _debounce(fn, wait) {\n      let id;\n      return (...a) => {\n        this.scheduler.clearTimeout?.(id);\n        id = this.scheduler.setTimeout?.(() => fn.apply(this, a), wait);\n      };\n    }\n\n    _handleAuthStateChange(authenticated) {\n      this.logger.debug(`[${MODULE}] Auth state changed. Authenticated: ${authenticated}`, { context: MODULE });\n      // CONSOLIDATED: No local authState storage - read from appModule.state when needed\n\n      // List of elements that depend on authentication for enabling/disabling\n      const authDependentElements = [\n        this.elements.searchButton, this.elements.reprocessButton, this.elements.setupButton,\n        this.elements.kbToggle, this.elements.settingsButton, this.elements.deleteKnowledgeBaseBtn,\n        this.elements.kbAttachRepoBtn, this.elements.kbDetachRepoBtn,\n        // Add other elements like file input / upload button if they are directly part of this component's elements\n      ];\n\n      authDependentElements.forEach((el) => {\n        if (!el) return; // Skip if an optional element isn't found\n        el.disabled = !authenticated;\n        el.classList.toggle(\"opacity-50\", !authenticated);\n        el.classList.toggle(\"cursor-not-allowed\", !authenticated);\n        if (!authenticated) {\n          el.title = \"Authentication required.\";\n        } else {\n          el.removeAttribute(\"title\"); // Or set to its functional title\n        }\n      });\n\n      // Hide status badge when logged out to prevent stale state\n      const badgeEl = this.elements?.statusBadge;\n      if (badgeEl) {\n        if (!authenticated) {\n          badgeEl.className = 'badge badge-outline badge-sm hidden';\n        } else {\n          // When user logs back in, reset to inactive until real status events arrive\n          badgeEl.className = 'badge badge-warning badge-sm';\n          badgeEl.textContent = 'Inactive';\n        }\n      }\n\n      if (!authenticated) {\n        this.logger.info(`[${MODULE}] User unauthenticated. Clearing KB data and showing inactive state.`, { context: MODULE });\n        this._showStatusAlert(\"Authentication required to use Knowledge Base features.\", \"warning\");\n        // Clear KB data and UI to prevent interaction with stale data\n        this.state.knowledgeBase = null;\n        this._showInactiveState();\n      } else {\n        // User is authenticated. If there's a current project, KB data might need to be (re)loaded\n        // This is often handled by currentProjectChanged or initial load sequence.\n        // For now, just ensure UI elements are enabled.\n        this.logger.debug(`[${MODULE}] User authenticated. KB UI elements enabled. KB data will load if project context is active.`, { context: MODULE });\n        // Potentially re-check/re-load KB if a project is active:\n        // const currentProjectId = this._getCurrentProjectId();\n        // if (currentProjectId) { this.manager.loadKnowledgeBase(currentProjectId); }\n      }\n    }\n  }\n\n  class KnowledgeBaseComponentWithDestroy extends KnowledgeBaseComponent {\n    destroy() {\n      const ds = this.getDep('DependencySystem');\n      if (ds && typeof ds.cleanupModuleListeners === 'function') {\n        ds.cleanupModuleListeners(MODULE);\n      } else if (this.eventHandlers && typeof this.eventHandlers.cleanupListeners === 'function') {\n        this.eventHandlers.cleanupListeners({ context: MODULE });\n      }\n      // destroy complete\n    }\n  }\n\n // --- public API export (no spread-clone) ---\n const instance = new KnowledgeBaseComponentWithDestroy();\n\n // patch-in canonical cleanup that also clears listeners\n const _origCleanup = typeof instance.cleanup === 'function'\n     ? instance.cleanup.bind(instance)\n     : () => {};\n\n instance.cleanup = function (...args) {\n   instance.eventHandlers?.cleanupListeners?.({ context: 'KnowledgeBaseComponent' });\n   _origCleanup(...args);\n };\n\n // --- never expose `.state` directly – wrap instance ------------------\n const publicAPI = new Proxy(instance, {\n   get (t, p, r) {\n     if (p === 'state') throw new Error('[KBComponent] state is private');\n     const v = Reflect.get(t, p, r);\n     return (typeof v === 'function') ? v.bind(t) : v;\n   },\n   set (t, p, v, r) {\n     if (p === 'state') throw new Error('[KBComponent] state is read-only');\n     return Reflect.set(t, p, v, r);\n   },\n   has (t, p)                { return (p === 'state') ? false : Reflect.has(t, p); },\n   ownKeys (t)               { return Reflect.ownKeys(t).filter(k => k !== 'state'); },\n   getOwnPropertyDescriptor (t, p) {\n     return (p === 'state') ? undefined : Reflect.getOwnPropertyDescriptor(t, p);\n   }\n });\n\n return publicAPI;\n}\n\nexport default createKnowledgeBaseComponent;\n"],"mappings":"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","ignoreList":[]}