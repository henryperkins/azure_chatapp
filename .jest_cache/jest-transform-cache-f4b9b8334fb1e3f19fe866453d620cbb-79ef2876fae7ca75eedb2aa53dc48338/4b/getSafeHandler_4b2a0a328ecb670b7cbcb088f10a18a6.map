{"version":3,"names":["createSafeHandler","DependencySystem","logger","Error","raw","modules","get","safeHandler","fn","ctx","a","err","error","context","cleanup","getSafeHandler","_default","exports","default"],"sources":["getSafeHandler.js"],"sourcesContent":["export function createSafeHandler({ DependencySystem, logger } = {}) {\n  if (!DependencySystem) throw new Error('[createSafeHandler] DependencySystem required');\n  if (!logger)          throw new Error('[createSafeHandler] logger required');\n\n  const raw = DependencySystem.modules?.get?.('safeHandler');\n\n  function safeHandler(fn, ctx = 'safeHandler') {\n    return typeof raw === 'function'\n      ? raw(fn, ctx)\n      : (typeof raw?.safeHandler === 'function'\n          ? raw.safeHandler(fn, ctx)\n          : (...a) => {\n              try { return fn(...a); }\n              catch (err) {\n                logger.error('[safeHandler] wrapped fn failed', err,\n                  { context: 'safeHandler:' + ctx });\n              }\n            });\n  }\n\n  return { safeHandler, cleanup() {} };\n}\n\n// Legacy named export (unchanged signature)\nexport function getSafeHandler(DependencySystem) {\n  return createSafeHandler({ DependencySystem, logger: { error(){} } }).safeHandler;\n}\n\n// Default export for compatibility\nexport default createSafeHandler;\n"],"mappings":";;;;;;;;AAAO,SAASA,iBAAiBA,CAAC;EAAEC,gBAAgB;EAAEC;AAAO,CAAC,GAAG,CAAC,CAAC,EAAE;EACnE,IAAI,CAACD,gBAAgB,EAAE,MAAM,IAAIE,KAAK,CAAC,+CAA+C,CAAC;EACvF,IAAI,CAACD,MAAM,EAAW,MAAM,IAAIC,KAAK,CAAC,qCAAqC,CAAC;EAE5E,MAAMC,GAAG,GAAGH,gBAAgB,CAACI,OAAO,EAAEC,GAAG,GAAG,aAAa,CAAC;EAE1D,SAASC,WAAWA,CAACC,EAAE,EAAEC,GAAG,GAAG,aAAa,EAAE;IAC5C,OAAO,OAAOL,GAAG,KAAK,UAAU,GAC5BA,GAAG,CAACI,EAAE,EAAEC,GAAG,CAAC,GACX,OAAOL,GAAG,EAAEG,WAAW,KAAK,UAAU,GACnCH,GAAG,CAACG,WAAW,CAACC,EAAE,EAAEC,GAAG,CAAC,GACxB,CAAC,GAAGC,CAAC,KAAK;MACR,IAAI;QAAE,OAAOF,EAAE,CAAC,GAAGE,CAAC,CAAC;MAAE,CAAC,CACxB,OAAOC,GAAG,EAAE;QACVT,MAAM,CAACU,KAAK,CAAC,iCAAiC,EAAED,GAAG,EACjD;UAAEE,OAAO,EAAE,cAAc,GAAGJ;QAAI,CAAC,CAAC;MACtC;IACF,CAAE;EACZ;EAEA,OAAO;IAAEF,WAAW;IAAEO,OAAOA,CAAA,EAAG,CAAC;EAAE,CAAC;AACtC;;AAEA;AACO,SAASC,cAAcA,CAACd,gBAAgB,EAAE;EAC/C,OAAOD,iBAAiB,CAAC;IAAEC,gBAAgB;IAAEC,MAAM,EAAE;MAAEU,KAAKA,CAAA,EAAE,CAAC;IAAE;EAAE,CAAC,CAAC,CAACL,WAAW;AACnF;;AAEA;AAAA,IAAAS,QAAA,GAAAC,OAAA,CAAAC,OAAA,GACelB,iBAAiB","ignoreList":[]}