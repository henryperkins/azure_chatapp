{"version":3,"names":["createAuthInit","deps","DependencySystem","domAPI","eventHandlers","logger","sanitizer","safeHandler","domReadinessService","APP_CONFIG","Error","initializeAuthSystem","documentReady","dependenciesAndElements","domSelectors","timeout","context","auth","modules","get","init","AuthBus","info","trackListener","event","detail","handleAuthStateChange","description","warn","dispatch","renderAuthHeader","err","error","appModuleLocal","projectManager","eventDetail","appModuleState","JSON","stringify","state","isAuthenticated","navService","appReadyDispatched","_appReadyDispatched","readyNow","isReady","proceed","navigateToProjectList","catch","loadProjects","modalManager","hide","forEach","modalName","modalErr","waitForEvent","TIMEOUTS","APP_READY_WAIT","then","isAuth","user","currentUser","displayName","name","username","debug","authBtn","getElementById","userMenu","logoutBtn","userInitialsEl","authStatus","userStatus","addClass","setStyle","setAttribute","removeClass","removeAttribute","toggleClass","initials","trim","length","split","map","p","join","toUpperCase","slice","setTextContent","e","preventDefault","authMod","logout","forceShowLoginModal","show","cleanup","cleanupListeners"],"sources":["authInit.js"],"sourcesContent":["// ========================================\n// FILE: /initialization/phases/authInit.js\n// ========================================\n/**\n * Authentication System Initialization\n * Handles auth setup, state changes, and UI updates\n * ~180 lines\n */\n\nexport function createAuthInit(deps) {\n    const {\n        DependencySystem, domAPI, eventHandlers,\n        logger, sanitizer, safeHandler,\n        domReadinessService, APP_CONFIG\n    } = deps;\n\n    if (!DependencySystem || !domAPI || !eventHandlers ||\n        !logger || !sanitizer || !safeHandler ||\n        !domReadinessService || !APP_CONFIG) {\n        throw new Error('[authInit] Missing required dependencies for auth initialization.');\n    }\n\n    async function initializeAuthSystem() {\n        await domReadinessService.documentReady();\n        await domReadinessService.dependenciesAndElements({\n            deps: ['auth', 'eventHandlers'],\n            domSelectors: ['#loginModalForm', '#authButton'],\n            timeout: 8000,\n            context: 'authInit.initializeAuthSystem'\n        });\n\n        const auth = DependencySystem.modules.get('auth');\n        if (!auth?.init) {\n            throw new Error('[authInit] Auth module is missing or invalid.');\n        }\n\n        // Register auth event listeners\n        if (auth.AuthBus) {\n            logger.info('[authInit] Registering AuthBus listeners', { context: 'authInit:init' });\n\n            eventHandlers.trackListener(\n                auth.AuthBus,\n                'authStateChanged',\n                safeHandler((event) => {\n                    logger.info('[authInit][AuthBus] Received authStateChanged', event?.detail, { context: 'authInit:authStateChanged' });\n                    handleAuthStateChange(event);\n                }, 'AuthBus authStateChanged handler'),\n                { description: '[authInit] AuthBus authStateChanged', context: 'authInit' }\n            );\n\n            eventHandlers.trackListener(\n                auth.AuthBus,\n                'authReady',\n                safeHandler((event) => {\n                    logger.info('[authInit][AuthBus] Received authReady', event?.detail, { context: 'authInit:authReady' });\n                    handleAuthStateChange(event);\n                }, 'AuthBus authReady handler'),\n                { description: '[authInit] AuthBus authReady', context: 'authInit' }\n            );\n        } else {\n            logger.warn('[authInit] No AuthBus instance for registration', { context: 'authInit:init' });\n        }\n\n        try {\n            logger.info('[authInit] Calling auth.init()', { context: 'authInit:init' });\n            await auth.init();\n            eventHandlers.dispatch('authReady');\n            renderAuthHeader();\n            return true;\n        } catch (err) {\n            logger.error('[authInit] Auth system initialization failed', err, {\n                context: 'authInit:init'\n            });\n            throw err;\n        }\n    }\n\n    function handleAuthStateChange(event) {\n        const appModuleLocal = DependencySystem.modules.get('appModule');\n        const projectManager = DependencySystem.modules.get('projectManager');\n\n        logger.info('[authInit][handleAuthStateChange]', {\n            eventDetail: event?.detail,\n            appModuleState: JSON.stringify(appModuleLocal.state),\n            context: 'authInit:handleAuthStateChange'\n        });\n\n        const isAuthenticated = appModuleLocal.state.isAuthenticated;\n        const navService = DependencySystem.modules.get('navigationService');\n        const appReadyDispatched = DependencySystem.modules.get('appModule')?._appReadyDispatched;\n        const readyNow = appReadyDispatched || appModuleLocal.state.isReady;\n\n        const proceed = () => {\n            if (navService?.navigateToProjectList) {\n                navService.navigateToProjectList().catch(() => {});\n            } else if (projectManager?.loadProjects) {\n                projectManager.loadProjects('all').catch(() => {});\n            }\n\n            // Ensure auth modals are closed after successful authentication\n            if (isAuthenticated) {\n                try {\n                    const modalManager = DependencySystem.modules.get?.('modalManager');\n                    if (modalManager && typeof modalManager.hide === 'function') {\n                        ['login', 'register'].forEach((modalName) => {\n                            try { modalManager.hide(modalName); } catch { /* ignore */ }\n                        });\n                    }\n                } catch (modalErr) {\n                    logger.warn('[authInit][handleAuthStateChange] Unable to hide auth modals after login', modalErr, { context: 'authInit:handleAuthStateChange' });\n                }\n            }\n        };\n\n        if (isAuthenticated) {\n            if (readyNow) {\n                proceed();\n            } else {\n                domReadinessService.waitForEvent('app:ready', {\n                    timeout: APP_CONFIG.TIMEOUTS?.APP_READY_WAIT ?? 30000,\n                    context: 'authInit:handleAuthStateChange'\n                }).then(proceed).catch(() => {});\n            }\n        }\n\n        renderAuthHeader();\n    }\n\n    function renderAuthHeader() {\n        try {\n            const appModuleLocal = DependencySystem.modules.get('appModule');\n            if (!appModuleLocal) {\n                logger.error('[authInit][renderAuthHeader] appModule not found.', {\n                    context: 'authInit:renderAuthHeader'\n                });\n                return;\n            }\n\n            const isAuth = appModuleLocal.state.isAuthenticated;\n            const user = appModuleLocal.state.currentUser;\n            const displayName = user?.name || user?.username || 'User';\n\n            logger.debug('[authInit][renderAuthHeader] Rendering auth header', {\n                isAuth, user, context: 'authInit:renderAuthHeader'\n            });\n\n            // Update auth UI elements\n            const authBtn = domAPI.getElementById('authButton');\n            const userMenu = domAPI.getElementById('userMenu');\n            const logoutBtn = domAPI.getElementById('logoutBtn');\n            const userInitialsEl = domAPI.getElementById('userInitials');\n            const authStatus = domAPI.getElementById('authStatus');\n            const userStatus = domAPI.getElementById('userStatus');\n\n            // Toggle visibility based on auth state\n            if (authBtn) {\n                if (isAuth) {\n                    domAPI.addClass(authBtn, 'hidden');\n                    domAPI.setStyle(authBtn, 'display', 'none');\n                    domAPI.setAttribute(authBtn, 'hidden', 'hidden');\n                } else {\n                    domAPI.removeClass(authBtn, 'hidden');\n                    domAPI.setStyle(authBtn, 'display', '');\n                    domAPI.removeAttribute(authBtn, 'hidden');\n                }\n            }\n\n            if (userMenu) {\n                domAPI.toggleClass(userMenu, 'hidden', !isAuth);\n                domAPI.setStyle(userMenu, 'display', isAuth ? '' : 'none');\n                isAuth\n                    ? domAPI.removeAttribute(userMenu, 'hidden')\n                    : domAPI.setAttribute(userMenu, 'hidden', 'hidden');\n            }\n\n            // Update user initials\n            if (userMenu && userInitialsEl) {\n                let initials = 'U';\n                if (isAuth) {\n                    if (typeof user?.name === 'string' && user.name.trim().length > 0) {\n                        initials = user.name.trim().split(/\\s+/).map(p => p[0]).join('').toUpperCase();\n                    } else if (typeof user?.username === 'string' && user.username.trim().length > 0) {\n                        initials = user.username.slice(0, 2).toUpperCase();\n                    }\n                }\n                domAPI.setTextContent(userInitialsEl, initials);\n            }\n\n            // Update status texts\n            if (authStatus) {\n                domAPI.setTextContent(authStatus,\n                    isAuth ? `Signed in as ${displayName}` : 'Not Authenticated'\n                );\n            }\n\n            if (userStatus) {\n                domAPI.setTextContent(userStatus,\n                    isAuth ? `Hello, ${displayName}` : 'Offline'\n                );\n            }\n\n            // Setup logout handler\n            if (logoutBtn) {\n                eventHandlers.trackListener(\n                    logoutBtn,\n                    'click',\n                    safeHandler((e) => {\n                        domAPI.preventDefault(e);\n                        logger.debug('[authInit][renderAuthHeader] Logout clicked.', {\n                            context: 'authInit:logout'\n                        });\n                        const authMod = DependencySystem.modules.get('auth');\n                        authMod?.logout?.().catch(err => {\n                            logger.error('[authInit] Error during logout:', err, {\n                                context: 'authInit:logout'\n                            });\n                        });\n                    }, 'Auth logout click'),\n                    { description: 'Auth logout click', context: 'authInit' }\n                );\n            }\n        } catch (err) {\n            logger.error('[authInit][renderAuthHeader] Error during rendering', err, {\n                context: 'authInit:renderAuthHeader'\n            });\n        }\n    }\n\n    function forceShowLoginModal() {\n        const appModuleLocal = DependencySystem.modules.get?.('appModule');\n        if (appModuleLocal && !appModuleLocal.state?.isAuthenticated) {\n            const modalManager = DependencySystem.modules.get?.('modalManager');\n            if (modalManager && typeof modalManager.show === 'function') {\n                modalManager.show('login');\n            } else {\n                throw new Error('[authInit][forceShowLoginModal] modalManager missing.');\n            }\n        }\n    }\n\n    function cleanup() {\n        eventHandlers.cleanupListeners({ context: 'authInit' });\n        logger.debug('[authInit] Cleanup completed', { context: 'authInit:cleanup' });\n    }\n\n    return {\n        initializeAuthSystem,\n        handleAuthStateChange,\n        renderAuthHeader,\n        forceShowLoginModal,\n        cleanup\n    };\n}\n"],"mappings":"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","ignoreList":[]}