{"version":3,"names":["createUIStateService","logger","Error","MODULE","state","Map","_composeKey","component","key","setState","value","mapKey","set","debug","context","getState","get","clearState","Array","from","keys","startsWith","delete","cleanup","clear","_default","exports","default"],"sources":["uiStateService.js"],"sourcesContent":["/**\n * uiStateService – front-end state façade (Phase-2.3)\n * --------------------------------------------------\n * A tiny in-memory store that provides one canonical place for view-level UI\n * flags that previously lived as \"let visible = …\" variables scattered across\n * components.  It intentionally keeps API surface minimal – only `setState`,\n * `getState`, `clearState`, and `cleanup` – because UI flags should not become\n * application logic.\n *\n * Guard-rails compliance:\n * • Factory function export, all dependencies via DI\n * • No side-effects at module scope\n * • Exposes cleanup() so it can be disposed deterministically\n */\n\nexport function createUIStateService({ logger } = {}) {\n  if (!logger) {\n    throw new Error('[uiStateService] logger dependency missing');\n  }\n\n  const MODULE = 'uiStateService';\n  // Using Map to avoid accidental prototype pollution / key collisions.\n  const state = new Map();\n\n  /* ------------------------------------------------------------- */\n  /* Internal helpers                                              */\n  /* ------------------------------------------------------------- */\n\n  function _composeKey(component, key) {\n    if (!component) throw new Error(`[${MODULE}] component name is required`);\n    if (!key) throw new Error(`[${MODULE}] key is required`);\n    return `${component}.${key}`;\n  }\n\n  /* ------------------------------------------------------------- */\n  /* Public API                                                    */\n  /* ------------------------------------------------------------- */\n\n  function setState(component, key, value) {\n    const mapKey = _composeKey(component, key);\n    state.set(mapKey, value);\n    logger.debug(`[uiStateService] setState ${mapKey}=${value}`, { context: MODULE });\n  }\n\n  function getState(component, key) {\n    return state.get(_composeKey(component, key));\n  }\n\n  function clearState(component) {\n    for (const mapKey of Array.from(state.keys())) {\n      if (mapKey.startsWith(`${component}.`)) state.delete(mapKey);\n    }\n    logger.debug(`[uiStateService] clearState for ${component}`, { context: MODULE });\n  }\n\n  function cleanup() {\n    state.clear();\n    logger.debug('[uiStateService] cleanup()', { context: MODULE });\n  }\n\n  return {\n    setState,\n    getState,\n    clearState,\n    cleanup\n  };\n}\n\nexport default createUIStateService;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,SAASA,oBAAoBA,CAAC;EAAEC;AAAO,CAAC,GAAG,CAAC,CAAC,EAAE;EACpD,IAAI,CAACA,MAAM,EAAE;IACX,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;EAC/D;EAEA,MAAMC,MAAM,GAAG,gBAAgB;EAC/B;EACA,MAAMC,KAAK,GAAG,IAAIC,GAAG,CAAC,CAAC;;EAEvB;EACA;EACA;;EAEA,SAASC,WAAWA,CAACC,SAAS,EAAEC,GAAG,EAAE;IACnC,IAAI,CAACD,SAAS,EAAE,MAAM,IAAIL,KAAK,CAAC,IAAIC,MAAM,8BAA8B,CAAC;IACzE,IAAI,CAACK,GAAG,EAAE,MAAM,IAAIN,KAAK,CAAC,IAAIC,MAAM,mBAAmB,CAAC;IACxD,OAAO,GAAGI,SAAS,IAAIC,GAAG,EAAE;EAC9B;;EAEA;EACA;EACA;;EAEA,SAASC,QAAQA,CAACF,SAAS,EAAEC,GAAG,EAAEE,KAAK,EAAE;IACvC,MAAMC,MAAM,GAAGL,WAAW,CAACC,SAAS,EAAEC,GAAG,CAAC;IAC1CJ,KAAK,CAACQ,GAAG,CAACD,MAAM,EAAED,KAAK,CAAC;IACxBT,MAAM,CAACY,KAAK,CAAC,6BAA6BF,MAAM,IAAID,KAAK,EAAE,EAAE;MAAEI,OAAO,EAAEX;IAAO,CAAC,CAAC;EACnF;EAEA,SAASY,QAAQA,CAACR,SAAS,EAAEC,GAAG,EAAE;IAChC,OAAOJ,KAAK,CAACY,GAAG,CAACV,WAAW,CAACC,SAAS,EAAEC,GAAG,CAAC,CAAC;EAC/C;EAEA,SAASS,UAAUA,CAACV,SAAS,EAAE;IAC7B,KAAK,MAAMI,MAAM,IAAIO,KAAK,CAACC,IAAI,CAACf,KAAK,CAACgB,IAAI,CAAC,CAAC,CAAC,EAAE;MAC7C,IAAIT,MAAM,CAACU,UAAU,CAAC,GAAGd,SAAS,GAAG,CAAC,EAAEH,KAAK,CAACkB,MAAM,CAACX,MAAM,CAAC;IAC9D;IACAV,MAAM,CAACY,KAAK,CAAC,mCAAmCN,SAAS,EAAE,EAAE;MAAEO,OAAO,EAAEX;IAAO,CAAC,CAAC;EACnF;EAEA,SAASoB,OAAOA,CAAA,EAAG;IACjBnB,KAAK,CAACoB,KAAK,CAAC,CAAC;IACbvB,MAAM,CAACY,KAAK,CAAC,4BAA4B,EAAE;MAAEC,OAAO,EAAEX;IAAO,CAAC,CAAC;EACjE;EAEA,OAAO;IACLM,QAAQ;IACRM,QAAQ;IACRE,UAAU;IACVM;EACF,CAAC;AACH;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEc3B,oBAAoB","ignoreList":[]}