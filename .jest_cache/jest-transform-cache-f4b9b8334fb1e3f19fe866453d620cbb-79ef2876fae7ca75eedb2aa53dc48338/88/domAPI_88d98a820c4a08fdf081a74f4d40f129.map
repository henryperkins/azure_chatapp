{"version":3,"names":["createDomAPI","documentObject","windowObject","debug","sanitizer","logger","Error","_log","m","_logger","warn","error","setLogger","newLogger","cleanup","checkFormValidity","form","checkValidity","reportFormValidity","reportValidity","resetForm","reset","toggleClass","el","cls","force","classList","String","split","filter","Boolean","forEach","c","toggle","setStyle","prop","val","style","setProperty","value","setAttribute","err","message","context","getParentNode","parentNode","selectElement","select","callMethod","obj","method","args","undefined","fn","apply","getValue","setValue","v","getTextContent","textContent","closest","selector","getDataAttribute","k","dataset","getElementById","id","querySelector","arg1","arg2","base","nodeName","querySelectorAll","createElement","tag","getBody","body","getDocumentElement","documentElement","getScrollingElement","scrollingElement","appendChild","parent","child","removeChild","replaceChildren","nodes","setInnerHTML","html","sanitize","dialogAllowCfg","ADD_TAGS","ADD_ATTR","innerHTML","replace","isDocumentHidden","hidden","ownerDocument","window","getActiveElement","activeElement","getComputedStyle","preventDefault","e","addClass","add","removeClass","remove","hasClass","contains","getAttribute","removeAttribute","setDataAttribute","removeDataAttribute","setTextContent","text","isSameNode","elA","elB","getId","addEventListener","removeEventListener","dispatchEvent","target","event","getDocument","getWindow","createDocumentFragment","createTextNode","txt","setElementId","setClassName","className","insertBefore","node","refNode","createSVGElement","createElementNS","getProperty","addMediaListener","mqList","handler","wrapped","addListener","removeListener","createMutationObserver","callback","options","Observer","MutationObserver","disconnect","obs","opts","Object","assign","childList","subtree","observe","getDocumentAttribute","attr","docEl","setDocumentAttribute","localStorageGet","key","localStorage","getItem","localStorageSet","setItem","matchMedia","query","matches"],"sources":["domAPI.js"],"sourcesContent":["/**\n * domAPI.js — Abstracted DOM helpers for strict DI, testability, and browser-independent access.\n * To be injected throughout app modules instead of direct usage of document, window, or related globals.\n *\n * Usage:\n *   import { createDomAPI } from './domAPI.js';\n *   const domAPI = createDomAPI({ documentObject: document, windowObject: window });\n *   domAPI.getElementById('foo'); // etc.\n */\n\n/**\n * domAPI.js — Abstracted DOM helpers for strict DI, testability, and browser-independent access.\n * To be injected throughout app modules instead of direct usage of document, window, or related globals.\n *\n * Usage:\n *   import { createDomAPI } from './domAPI.js';\n *   const domAPI = createDomAPI({ documentObject: document, windowObject: window });\n *   domAPI.getElementById('foo'); // etc.\n */\n\nexport function createDomAPI({\n  documentObject,\n  windowObject,\n  debug = false,\n  sanitizer = null,\n  logger = null\n} = {}) {\n  if (!documentObject || !windowObject) {\n    throw new Error('[domAPI] documentObject & windowObject are required – do not rely on globals.');\n  }\n\n  // Local debug output (disabled when debug === false)\n  const _log = (...m) => {\n    if (!debug) return;\n    // Optionally add debugging output here if desired.\n  };\n\n  // unified warn/error sink (no direct console)\n  let _logger = logger || { warn: () => { }, error: () => { } };\n\n  /* allow late upgrade when real logger is ready */\n  function setLogger(newLogger) { if (newLogger) _logger = newLogger; }\n\n  // Guardrails: expose `cleanup()` in factory return for compliance\n  function cleanup() {\n    // No event listeners or DOM state to clean, but present for guardrail compliance\n  }\n\n  // --- Form helper wrappers for DI-strict modules ---\n  function checkFormValidity(form) {\n    return typeof form?.checkValidity === 'function' ? form.checkValidity() : false;\n  }\n  function reportFormValidity(form) {\n    return typeof form?.reportValidity === 'function' ? form.reportValidity() : false;\n  }\n  function resetForm(form) {\n    if (typeof form?.reset === 'function') form.reset();\n  }\n\n  // --- Additional helpers for DI compliance ---\n  function toggleClass(el, cls, force) {\n    if (!el?.classList || !cls) return;\n    String(cls).split(/\\s+/).filter(Boolean).forEach(c =>\n      typeof force === \"boolean\"\n        ? el.classList.toggle(c, force)\n        : el.classList.toggle(c)\n    );\n  }\n  function setStyle(el, prop, val) {\n    if (el && el.style) {\n      el.style[prop] = val;\n    }\n  }\n  function setProperty(el, prop, value) {\n    if (!el) return;\n    try {\n      if (prop in el) el[prop] = value;\n      else el.setAttribute(prop, value);\n    } catch (err) {\n      logger.warn('[domAPI] setProperty failed', { error: err.message, prop, context: 'domAPI:setProperty' });\n    }\n  }\n  function getParentNode(el) {\n    return el?.parentNode ?? null;\n  }\n  function selectElement(el) {\n    try {\n      el?.select?.();\n    } catch (err) {\n      logger.warn('[domAPI] selectElement failed', { error: err.message, context: 'domAPI:selectElement' });\n    }\n  }\n  function callMethod(obj, method, ...args) {\n    if (!obj) return undefined;\n    const fn = obj[method];\n    if (typeof fn === 'function') return fn.apply(obj, args);\n    return undefined;\n  }\n  function getValue(el) {\n    return el ? (typeof el.value !== 'undefined' ? el.value : '') : '';\n  }\n  function setValue(el, v) {\n    if (el && typeof el.value !== 'undefined') el.value = v;\n  }\n  function getTextContent(el) {\n    return el ? (typeof el.textContent !== 'undefined' ? el.textContent : '') : '';\n  }\n  function closest(el, selector) {\n    return el && typeof el.closest === 'function' ? el.closest(selector) : null;\n  }\n  function getDataAttribute(el, k) {\n    return el && el.dataset ? el.dataset[k] : undefined;\n  }\n\n  return {\n    getElementById(id) {\n      const el = documentObject.getElementById(id);\n      if (!el) _log(`getElementById(\"${id}\") → null`);\n      return el;\n    },\n    querySelector(arg1, arg2) {\n      let base, selector;\n      if (typeof arg1 === 'string') {\n        selector = arg1;\n        base = (arg2 && typeof arg2.querySelector === 'function') ? arg2 : documentObject;\n      } else if (arg1 && typeof arg1.querySelector === 'function' && typeof arg2 === 'string') {\n        base = arg1;\n        selector = arg2;\n      } else {\n        throw new Error('[domAPI.querySelector] Invalid arguments; fallback to String(arg1) is forbidden.');\n      }\n      const el = base.querySelector(selector);\n      if (!el) _log(`querySelector(\"${selector}\") (base=${base?.id || base?.nodeName || 'document'}) → null`);\n      return el;\n    },\n    querySelectorAll(arg1, arg2) {\n      let base, selector;\n      if (typeof arg1 === 'string') {\n        selector = arg1;\n        base = (arg2 && typeof arg2.querySelectorAll === 'function') ? arg2 : documentObject;\n      } else if (arg1 && typeof arg1.querySelectorAll === 'function' && typeof arg2 === 'string') {\n        base = arg1;\n        selector = arg2;\n      } else {\n        selector = String(arg1);\n        base = documentObject;\n      }\n      return base.querySelectorAll(selector);\n    },\n    createElement: (tag) => documentObject.createElement(tag),\n    getBody: () => documentObject.body,\n    getDocumentElement: () => documentObject.documentElement,\n    getScrollingElement: () =>\n      documentObject.scrollingElement ||\n      documentObject.documentElement ||\n      documentObject.body,\n    appendChild: (parent, child) => parent && child && parent.appendChild(child),\n    removeChild: (parent, child) => {\n      if (parent && child && typeof parent.removeChild === 'function') {\n        parent.removeChild(child);\n      }\n    },\n    replaceChildren: (parent, ...nodes) => parent && parent.replaceChildren && parent.replaceChildren(...nodes),\n    setInnerHTML: (el, html) => {\n      if (!el) return;\n      if (sanitizer && typeof sanitizer.sanitize === 'function') {\n        /*\n         * DOMPurify (our default sanitizer) removes non-standard / less common\n         * interactive elements such as <dialog> unless they are explicitly\n         * allowed.  The application injects the complete modals template\n         * (static/html/modals.html) at runtime which relies heavily on\n         * <dialog> elements.  Once stripped, ModalManager cannot locate\n         * `#loginModal`, `#projectModal`, … and any call to\n         *   modalManager.show('login')\n         * quietly fails — the user never sees the Login dialog.\n         *\n         * To fix this we extend the allow-list with the HTML5 <dialog> tag\n         * plus its `open` attribute before delegating to DOMPurify.\n         *\n         * NOTE: This is a global relaxation but still safe because <dialog>\n         * does not execute scripts and keeping it blocked offers no concrete\n         * XSS protection advantage.\n         */\n        const dialogAllowCfg = { ADD_TAGS: ['dialog'], ADD_ATTR: ['open', 'method'] };\n        el.innerHTML = sanitizer.sanitize(html, dialogAllowCfg);\n      } else {\n        _logger.warn('[domAPI] setInnerHTML called without sanitizer (auto-escaped)', { context: 'domAPI:setInnerHTML' });\n        el.textContent = String(html).replace(/<[^>]*>?/gm, '');\n      }\n    },\n    isDocumentHidden: () => documentObject.hidden === true,\n    ownerDocument: documentObject,\n    window: windowObject,\n    getActiveElement: () => documentObject.activeElement,\n    body: documentObject.body,\n    getComputedStyle: (el) => {\n      if (windowObject?.getComputedStyle) {\n        return windowObject.getComputedStyle(el);\n      }\n      logger.error('[domAPI.getComputedStyle] window.getComputedStyle is unavailable; fallback/stub is forbidden.');\n      throw new Error('[domAPI.getComputedStyle] window.getComputedStyle is unavailable; fallback/stub is forbidden.');\n    },\n    preventDefault: (e) => {\n      if (e && typeof e.preventDefault === 'function') {\n        e.preventDefault();\n      }\n    },\n    closest,\n    addClass(el, cls) {\n      if (!el?.classList || !cls) return;\n      el.classList.add(...String(cls).split(/\\s+/).filter(Boolean));\n    },\n    removeClass(el, cls) {\n      if (!el?.classList || !cls) return;\n      el.classList.remove(...String(cls).split(/\\s+/).filter(Boolean));\n    },\n    toggleClass,\n    hasClass: (el, cls) => {\n      return !!(el && el.classList && el.classList.contains(cls));\n    },\n    setAttribute: (el, k, v) => {\n      if (el && typeof el.setAttribute === 'function') {\n        el.setAttribute(k, v);\n      }\n    },\n    getAttribute: (el, k) => {\n      if (el && typeof el.getAttribute === 'function') {\n        return el.getAttribute(k);\n      }\n      return null;\n    },\n    removeAttribute: (el, k) => {\n      if (el && typeof el.removeAttribute === 'function') {\n        el.removeAttribute(k);\n      }\n    },\n    setDataAttribute: (el, k, v) => {\n      if (el && el.dataset) {\n        el.dataset[k] = v;\n      }\n    },\n    getDataAttribute,\n    removeDataAttribute: (el, k) => {\n      if (el && el.dataset) {\n        delete el.dataset[k];\n      }\n    },\n    setStyle,\n    setProperty,\n    getTextContent,\n    setTextContent: (el, text) => {\n      if (el && typeof text === 'string') {\n        el.textContent = text;\n      }\n    },\n    getValue,\n    setValue,\n    isSameNode: (elA, elB) => {\n      if (elA && typeof elA.isSameNode === 'function') {\n        return elA.isSameNode(elB);\n      }\n      return elA === elB;\n    },\n    getId: (el) => {\n      if (el && typeof el.id === 'string') {\n        return el.id;\n      }\n      return null;\n    },\n    addEventListener: (el, ...args) => {\n      (el ?? documentObject).addEventListener(...args);\n    },\n    removeEventListener: (el, ...args) => {\n      (el ?? documentObject).removeEventListener(...args);\n    },\n    dispatchEvent: (target, event) => {\n      if (!target || typeof target.dispatchEvent !== 'function') {\n        throw new Error('dispatchEvent: invalid target');\n      }\n      return target.dispatchEvent(event);\n    },\n    getDocument: () => documentObject,\n    callMethod,\n    getWindow: () => windowObject,\n    createDocumentFragment: () => documentObject.createDocumentFragment(),\n    createTextNode: (txt = '') => documentObject.createTextNode(txt),\n    setElementId: (el, id) => { if (el) el.id = id; },\n    setClassName: (el, cls) => { if (el) el.className = cls; },\n    selectElement,\n    getParentNode,\n    insertBefore: (parent, node, refNode = null) =>\n      parent?.insertBefore?.(node, refNode),\n    createSVGElement: (tag) =>\n      documentObject.createElementNS('http://www.w3.org/2000/svg', tag),\n    getProperty: (el, prop) => el?.[prop],\n\n    /* ── <NEW helpers – added for ThemeManager> ───────────────────── */\n\n    /**\n     * Attach a listener to a MediaQueryList and return an unsubscribe fn.\n     * Works with both modern addEventListener('change', …) and the\n     * older addListener/removeListener APIs.\n     */\n    addMediaListener(mqList, handler) {\n      if (!mqList || typeof handler !== 'function') return () => {};\n      const wrapped = (e) => handler(e);\n      if (typeof mqList.addEventListener === 'function') {\n        mqList.addEventListener('change', wrapped);\n        return () => mqList.removeEventListener('change', wrapped);\n      }\n      if (typeof mqList.addListener === 'function') {\n        mqList.addListener(wrapped);\n        return () => mqList.removeListener(wrapped);\n      }\n      // Fallback: no-op unsubscribe\n      return () => {};\n    },\n\n    /**\n     * Convenience wrapper that creates & starts a MutationObserver.\n     * Returns the observer so callers can disconnect() later.\n     */\n    createMutationObserver(callback, options = {}, target = documentObject) {\n      const Observer = windowObject.MutationObserver;\n      if (typeof Observer !== 'function') {\n        logger.error('[domAPI] MutationObserver unavailable – createMutationObserver noop',\n                      { context: 'domAPI:createMutationObserver' });\n        return { disconnect() {} };\n      }\n      const obs = new Observer(callback);\n      try {\n        const opts = Object.assign({ childList: true, subtree: true }, options);\n        obs.observe(target, opts);\n      } catch (err) {\n        logger.error('[domAPI] MutationObserver.observe failed', err,\n                      { context: 'domAPI:createMutationObserver' });\n      }\n      return obs;\n    },\n\n    /* ── <NEW helpers – event/DI compliance> ───────────────────────── */\n    /* Document-level attributes (ThemeManager & others) */\n    getDocumentAttribute(attr) {\n      const docEl = documentObject.documentElement;\n      return docEl ? docEl.getAttribute(attr) : null;\n    },\n    setDocumentAttribute(attr, value) {\n      const docEl = documentObject.documentElement;\n      if (!docEl) return;\n      if (value === null || value === undefined) docEl.removeAttribute(attr);\n      else docEl.setAttribute(attr, value);\n    },\n\n    /* Local-storage helpers (ThemeManager) */\n    localStorageGet(key) {\n      try { return windowObject.localStorage.getItem(key); }\n      catch { return null; }\n    },\n    localStorageSet(key, value) {\n      try { windowObject.localStorage.setItem(key, value); }\n      catch { /* quota / disabled – silently ignore */ }\n    },\n\n    /* matchMedia shim (ThemeManager) */\n    matchMedia(query) {\n      return (typeof windowObject.matchMedia === 'function')\n        ? windowObject.matchMedia(query)\n        : { matches: false, addListener() {}, removeListener() {},\n            addEventListener() {}, removeEventListener() {} };\n    },\n\n    /* Form-validation wrappers (eventHandlers.setupForm) */\n    checkFormValidity ,\n    reportFormValidity,\n    resetForm         ,\n    /* ── </NEW helpers> ─────────────────────────────────────────────── */\n\n    setLogger,      // ← NEW\n    cleanup\n  };\n}\n"],"mappings":"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","ignoreList":[]}