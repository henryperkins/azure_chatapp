/* =============================================================================
   tailwind-mobile.css - Enhanced Mobile-First Aggregator
   Implements improved color contrast, typography, and spacing systems
============================================================================= */

@import "tailwindcss";

/* DaisyUI plugin with CSS-first approach */
@plugin "daisyui" {
  themes: azure-light --default, dracula-enhanced --prefersdark;
}

/* Content paths are configured in tailwind.config.js for DaisyUI compatibility */

/* ==============================================
   THEME — All design tokens live here
   ============================================== */
@theme {
  /* Brand palette (using OKLCH for wide gamut) */
  --color-primary: oklch(0.63 0.22 268);
  --color-primary-foreground: oklch(0.98 0.02 270);
  --color-primary-content: oklch(0.98 0.02 270);
  --color-secondary: oklch(0.67 0.21 286);
  --color-secondary-content: oklch(0.98 0.02 270);
  --color-accent: oklch(0.76 0.18 220);

  /* Base colors */
  --color-base-100: oklch(1.00 0.00 0);
  --color-base-200: oklch(0.95 0.01 286);
  --color-base-300: oklch(0.90 0.02 286);
  --color-base-content: oklch(0.20 0.02 286);

  /* Status colors */
  --color-success: oklch(0.72 0.15 142);
  --color-success-content: oklch(0.98 0.02 142);
  --color-warning: oklch(0.84 0.15 85);
  --color-warning-content: oklch(0.15 0.05 85);
  --color-error: oklch(0.65 0.20 25);
  --color-error-content: oklch(0.98 0.02 25);

  /* Spacing scale root (enables dynamic mt-17 etc.) */
  --spacing: 0.25rem;

  /* Default ring width for accessibility */
  --default-ring-width: 2px;
}

/* 2. Base Layer: Define raw CSS variables for theming */
@layer base {
  :root {
    /* base colours (light) */
    --b1: 255 255 255;
    --b2: 243 244 246;
    --b3: 229 231 235;

    /* brand palette */
    --p :  59 130 246;   /* primary  – #3b82f6   */
    --s : 124  58 237;   /* secondary – #7c3aed  */
    --a :  96 165 250;   /* accent    – #60a5fa  */
    --pc: 255 255 255;   /* primary-content */
    --sc: 255 255 255;   /* secondary-content */

    /* success / warn / error */
    --su:  34 197  94;
    --wa: 234 179   8;
    --er: 239  68  68;

    /* Backwards-compat mapping for *.css that still uses --color-* vars */
    --color-base-100 : rgb(var(--b1) / 1);
    --color-base-200 : rgb(var(--b2) / 1);
    --color-base-300 : rgb(var(--b3) / 1);
    --color-primary  : rgb(var(--p)  / 1);
    --color-secondary: rgb(var(--s)  / 1);
    --color-accent   : rgb(var(--a)  / 1);
  }

  /* Dark (dracula-enhanced) variant */
  html.dark,
  [data-theme="dracula-enhanced"] {
    --b1: 40 42 54;
    --b2: 33 34 44;
    --b3: 26 27 34;

    --p : 135  56 239;
    --s :  59 130 246;
    --a :  96 165 250;
    --pc: 0 0 0;
    --sc: 0 0 0;

    --color-base-100 : rgb(var(--b1) / 1);
    --color-base-200 : rgb(var(--b2) / 1);
    --color-base-300 : rgb(var(--b3) / 1);
    --color-base-content: oklch(0.80 0.02 286);
    --color-primary  : rgb(var(--p)  / 1);
    --color-secondary: rgb(var(--s)  / 1);
  }
}

/* Improved animations with reduced motion support */
@keyframes mobile-fade-in {
  from {
    opacity: 0;
    transform: translateY(var(--spacing-sm)) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes mobile-slide-in {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

@keyframes mobile-pulse {
  0% { opacity: 1; }
  50% { opacity: 0.7; }
  100% { opacity: 1; }
}

@keyframes skeleton-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Global utility classes */
.animate-mobile-fade-in { animation: mobile-fade-in var(--transition-slow) ease-out forwards; }
.animate-mobile-slide-in { animation: mobile-slide-in var(--transition-slow) ease-out forwards; }
.animate-mobile-pulse { animation: mobile-pulse 2s infinite; }

/* Responsive typography with clamp */
.text-responsive-xs { font-size: var(--font-size-xs); }
.text-responsive-sm { font-size: var(--font-size-sm); }
.text-responsive-base { font-size: var(--font-size-base); }
.text-responsive-lg { font-size: var(--font-size-lg); }
.text-responsive-xl { font-size: var(--font-size-xl); }
.text-responsive-2xl { font-size: var(--font-size-2xl); }

/* ==============================================
   UTILITIES — Focus styles & form controls
   ============================================== */
@utility focus-ring {
  /* Single-purpose utility consumed via class="focus-ring" */
  outline: var(--default-ring-width) solid var(--color-primary);
  outline-offset: 2px;
}

@utility form-focus {
  /* Use Tailwind utilities inside @apply AFTER tokens exist */
  @apply ring-2 ring-primary ring-offset-2 ring-offset-base-100
         border-primary outline-none;
}

@utility skeleton {
  /* DaisyUI-compatible skeleton loading animation */
  background: linear-gradient(90deg,
    var(--color-base-300) 25%,
    var(--color-base-200) 50%,
    var(--color-base-300) 75%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

@utility btn {
  /* DaisyUI-compatible button base styles */
  @apply inline-flex items-center justify-center px-4 py-2 rounded-lg
         font-medium cursor-pointer border border-transparent
         transition-colors duration-200 min-h-12 min-w-12;
}

@utility btn-primary {
  /* Primary button variant */
  @apply bg-primary text-primary-content hover:bg-primary/90;
}

@utility btn-lg {
  /* Large button size */
  @apply px-6 py-3 text-lg min-h-14;
}

/* Legacy focus styles for existing components */
.focus-ring:focus {
  @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-base-100;
}

/* Import focused component files */
@import "./mobile-components.css";
@import "./mobile-layouts.css";
