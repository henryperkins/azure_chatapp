/* =============================================================================
   enhanced-components.css
   =============================================================================
   Enhanced Components CSS for Azure Chat Application
   Tailwind CSS v4.1 + DaisyUI v5
*/

/* Do NOT "@import 'tailwindcss';" here. This file is included by tailwind.css. */

/* ----------------------------------------------------------------------------- */
/*                            Custom DaisyUI Themes                              */
/* ----------------------------------------------------------------------------- */

/* Enhanced Dracula theme with better contrast ratios for accessibility */
@plugin "daisyui/theme" {
  name: dracula-enhanced;
  default: false;
  prefersdark: true;
  color-scheme: dark;

  /* Enhanced base colors */
  --color-base-100: oklch(28.8% 0.025 277.5);
  --color-base-200: oklch(25.8% 0.023 277.5);
  --color-base-300: oklch(22.8% 0.021 277.5);
  --color-base-content: oklch(98% 0.01 106.5);

  /* Vibrant primary (pink) */
  --color-primary: oklch(76% 0.19 346.8);
  --color-primary-content: oklch(15% 0.036 346.8);
  --color-primary-focus: oklch(78% 0.21 346.8);

  /* Enhanced secondary (purple) */
  --color-secondary: oklch(75% 0.155 301.9);
  --color-secondary-content: oklch(15% 0.03 301.9);
  --color-secondary-focus: oklch(77% 0.17 301.9);

  /* Brightened accent (yellow) */
  --color-accent: oklch(84% 0.13 66.6);
  --color-accent-content: oklch(16.7% 0.024 66.6);
  --color-accent-focus: oklch(86% 0.14 66.6);

  /* Other UI colors */
  --color-neutral: oklch(39.5% 0.035 275.5);
  --color-neutral-content: oklch(88% 0.01 275.5);

  /* Enhanced status colors */
  --color-info: oklch(88.3% 0.1 212.8);
  --color-info-content: oklch(17.7% 0.02 212.8);

  --color-success: oklch(87.1% 0.22 148);
  --color-success-content: oklch(17.4% 0.045 148);

  --color-warning: oklch(95.5% 0.14 112.8);
  --color-warning-content: oklch(19.1% 0.03 112.8);

  --color-error: oklch(68.2% 0.21 24.4);
  --color-error-content: oklch(13.6% 0.045 24.4);

  /* UI radius and sizing */
  --radius-selector: 0.3rem;
  --radius-field:    0.3rem;
  --radius-box:      0.3rem;
  --size-selector:   0.25rem;
  --size-field:      0.25rem;

  /* Shadows and animations */
  --border: 0.5px;
  --depth:  0.2;
  --noise:  1;
  --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
  --animation-duration: 200ms;
}

/* Light mode theme */
@plugin "daisyui/theme" {
  name: azure-light;
  default: true;
  prefersdark: false;
  color-scheme: light;

  /* Base colors */
  --color-base-100: oklch(98% 0.01 270);
  --color-base-200: oklch(95% 0.02 270);
  --color-base-300: oklch(92% 0.03 270);
  --color-base-content: oklch(27% 0.02 270);

  /* Primary */
  --color-primary: oklch(60% 0.18 275);
  --color-primary-content: oklch(96% 0.01 275);

  /* Secondary */
  --color-secondary: oklch(70% 0.15 240);
  --color-secondary-content: oklch(97% 0.01 240);

  /* Accent */
  --color-accent: oklch(65% 0.16 210);
  --color-accent-content: oklch(97% 0.01 210);

  /* Status */
  --color-info: oklch(79% 0.12 212);
  --color-info-content: oklch(20% 0.02 212);
  --color-success: oklch(75% 0.16 148);
  --color-success-content: oklch(98% 0.01 148);
  --color-warning: oklch(82% 0.15 90);
  --color-warning-content: oklch(25% 0.03 90);
  --color-error: oklch(70% 0.18 24);
  --color-error-content: oklch(98% 0.01 24);

  /* Radius & sizing */
  --radius-selector: 0.75rem;
  --radius-field:    0.5rem;
  --radius-box:      0.75rem;
  --size-selector:   0.3rem;
  --size-field:      0.3rem;

  /* Borders & effects */
  --border: 1px;
  --depth:  0.3;
  --noise:  0;
}

/* ----------------------------------------------------------------------------- */
/*                       Accessibility and Component Utilities                   */
/* ----------------------------------------------------------------------------- */

/* Focus styles for better keyboard navigation */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
.tab:focus-visible,
.btn:focus-visible,
.menu-item:focus-visible,
[role="button"]:focus-visible {
  @apply outline-offset-2 outline-2 outline-primary;
}

/* Buttons */
.btn {
  @apply transition duration-200 min-w-[44px] min-h-[44px]
         max-w-full w-full sm:w-auto px-4;
}

/* Icon-only & square buttons */
.btn-icon,
.btn-square,
.btn.btn-circle,
[aria-label][type="button"]:not(.btn) {
  @apply flex items-center justify-center p-0;
  width: 44px !important;
  height: 44px !important;
}

/* Hover & active states */
.btn:hover {
  @apply shadow-xs transform-gpu -translate-y-0.5;
}
.btn:active,
.btn:focus:active {
  @apply shadow-xs transform-gpu translate-y-0 active:bg-primary/20;
}

/* Form field focus & error states */
.input:focus-visible,
.select:focus-visible,
.textarea:focus-visible {
  @apply ring-2 ring-primary;
}
.input-error,
.select-error,
.textarea-error {
  @apply border-error;
}

/* Validation hints */
.validator-success { @apply border-success; }
.validator-error   { @apply border-error;   }
.validator-hint    { @apply text-xs mt-1 opacity-90; }
.validator-hint-error   { @apply text-error;   }
.validator-hint-success { @apply text-success; }

/* Enhanced Modals */
.modal-box {
  @apply max-h-[90vh] overflow-y-auto overflow-x-auto px-2;
}
@media (max-width: 640px) {
  .modal-box {
    @apply max-w-full px-2;
  }
}

/* Loading states */
.loading-container { @apply flex items-center justify-center p-4; }
.loading-overlay {
  @apply absolute inset-0 flex items-center justify-center z-50;
}

/* Chat UI */
.chat-container {
  @apply flex flex-col space-y-4 p-4 max-w-full w-full;
}
@media (max-width: 640px) {
  .chat-container { @apply p-2 space-y-2; }
}
.chat-user   { @apply chat chat-end; }
.chat-ai     { @apply chat chat-start; }
.chat-user .chat-bubble { @apply chat-bubble-primary; }
.chat-ai   .chat-bubble { @apply chat-bubble-neutral; }
.chat-message-container {
  @apply w-full max-w-full overflow-x-auto whitespace-pre-wrap;
  max-height: 60vh; overflow-y: auto;
}
@media (max-width: 640px) {
  .chat-message-container { @apply p-1 max-h-[40vh]; }
}
.chat-timestamp { @apply text-sm opacity-70 mt-1; }

/* Sticky input bar on mobile */
@media (max-width: 640px) {
  #projectChatContainer .flex.items-center.border-t,
  #globalChatContainer  .flex.items-center.border-t {
    position: sticky; bottom: 0; z-index: 10; @apply p-2 bg-base-100;
  }
  #projectChatInput, #chatUIInput { @apply text-base; }
}

/* Ensure chat bubbles wrap properly */
.chat-bubble {
  @apply max-w-full break-words; word-break: break-word;
}

/* Knowledge Base cards */
.kb-result-card {
  @apply card bg-base-100 shadow-xs hover:shadow-md transition-all border border-base-300 cursor-pointer;
}
.kb-result-card:focus-visible {
  @apply outline-offset-2 outline-2 outline-primary;
}
.kb-result-relevance { @apply badge badge-sm; }
.kb-result-relevance-high   { @apply badge-success; }
.kb-result-relevance-medium { @apply badge-warning; }
.kb-result-relevance-low    { @apply badge-ghost; }

/* Responsive Stats Panel */
@media (max-width: 640px) {
  .stats   { @apply flex flex-col space-y-4; }
  .stat    { @apply w-full;              }
}

/* Sidebar Navigation */
.sidebar-nav {
  @apply menu menu-vertical p-2 bg-base-200 w-full rounded-box;
}
@media (max-width: 640px) {
  .sidebar {
    @apply fixed inset-0 z-50 w-4/5 max-w-xs bg-base-100 flex flex-col overflow-y-auto touch-pan-y;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
  .sidebar-backdrop {
    @apply fixed inset-0 z-40 bg-base-300/70;
  }
  .sidebar-dock {
    @apply fixed bottom-0 left-0 w-full bg-base-100 border-t flex justify-around items-center gap-2;
    padding-bottom: env(safe-area-inset-bottom);
    min-height: 56px;
  }
}
.sidebar-nav-item {
  @apply font-medium min-h-[44px] min-w-[44px];
}
.sidebar-nav-item.active {
  @apply bg-primary text-primary-content;
}

/* Tabs */
.enhanced-tabs { @apply gap-1 overflow-x-auto whitespace-nowrap; }
.enhanced-tab  { @apply transition-all duration-200 min-w-[44px] min-h-[44px] px-3; }
.enhanced-tab.tab-active { @apply font-medium; }

/* Skeleton states */
.skeleton-card {
  @apply card shadow-xs border border-base-300 animate-pulse p-4 bg-base-200;
}
.skeleton-text   { @apply h-4 bg-base-300 rounded my-2; }
.skeleton-circle { @apply h-12 w-12 bg-base-300 rounded-full; }

/* File Upload Zones */
.upload-zone {
  @apply border-2 border-dashed border-base-300 rounded-box p-8 text-center transition-all duration-300;
}
@media (max-width: 640px) {
  .upload-zone { @apply p-4; }
  .file-preview { @apply flex-col items-start gap-2 w-full; }
}
.upload-zone-active { @apply border-primary bg-primary; }
.upload-zone-error  { @apply border-error bg-error; }
.file-preview {
  @apply p-2 border border-base-300 rounded-box flex items-center gap-2 bg-base-100 mt-2 w-full;
}
.file-preview-delete,
.file-preview-remove {
  min-width: 44px !important;
  min-height: 44px !important;
  @apply flex items-center justify-center p-0;
}
.file-preview-icon { @apply text-lg opacity-70; }
.file-preview-name { @apply flex-1 truncate text-sm;    }
.file-preview-size { @apply text-xs opacity-70;        }
.file-preview-remove {
  @apply btn btn-ghost btn-md btn-square text-error;
}

/* ----------------------------------------------------------------------------- */
/*                          Notification Container Fix                          */
/* ----------------------------------------------------------------------------- */

/* Grouped selectors with proper ruleset syntax to fix broken declaration */
#notificationContainer .alert,
#notificationArea .notification-item {
  box-sizing: border-box;
  margin: 0.3rem auto !important;
  max-width: min(420px, 92vw) !important;
  min-width: 200px !important;
  background: var(--color-base-100, #fff);
  box-shadow: 0 2px 8px 0 rgba(44,44,56,0.11), 0 0.5px 2px 0 rgba(44,44,55,0.07);
  border-radius: 0.26rem;
  padding: 0.5rem 0.8rem !important;
}

/* Notification area container */
#notificationArea,
#notificationContainer {
  position: fixed;
  top: 2.5rem;
  right: 1rem;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  overflow-y: auto;
  max-height: 44vh;
  width: min(420px, 92vw);
  min-width: 200px;
  background: rgba(var(--color-base-100-rgb,250,250,250),0.87);
  border: 1.5px solid var(--color-base-300,#e5e7eb);
  border-radius: 0.42rem;
  backdrop-filter: blur(7.5px) saturate(1.13);
  transition: background 0.24s, border 0.18s;
  scrollbar-width: thin;
  scrollbar-color: var(--color-base-300,#bfbfc7) var(--color-base-100,#f9fafb);
}
#notificationArea::-webkit-scrollbar,
#notificationContainer::-webkit-scrollbar {
  width: 8px;
  background: rgba(var(--color-base-200-rgb,240,240,245),0.12);
}
#notificationArea::-webkit-scrollbar-thumb,
#notificationContainer::-webkit-scrollbar-thumb {
  background: rgba(80,96,120,0.23);
  border-radius: 8px;
  border: 1px solid var(--color-base-300,#d2d4de);
}
#notificationArea::-webkit-scrollbar-thumb:hover,
#notificationContainer::-webkit-scrollbar-thumb:hover {
  background: rgba(80,96,120,0.34);
}
#notificationArea > *,
#notificationContainer > * {
  pointer-events: all;
}

/* Responsive notification area adjustments */
@media (max-width: 640px) {
  #notificationArea,
  #notificationContainer {
    top: 0.9rem;
    right: 0.25rem;
    left: 0.25rem;
    max-height: 74vh;
    width: 98vw;
    min-width: 0;
    align-items: stretch;
  }
}
